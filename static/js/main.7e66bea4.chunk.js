(this["webpackJsonptarock-sheet"]=this["webpackJsonptarock-sheet"]||[]).push([[0],{353:function(e,t,n){"use strict";n.r(t);var r,c,a=n(3),o=n(1),i=n.n(o),l=n(14),u=n.n(l),s=n(417),j=n(418),O=n(392),b=n(420),d=n(50),f=n(419),h=n(192),p=n(9),v=n(17),T=n(13),y=n(183),E=n.n(y),x=n(184),C=n.n(x);!function(e){e.PARTY="PARTY",e.TRULL="TRULL",e.FOUR_KING="FOUR_KING",e.CATCH_THE_MAYOR="CATCH_THE_MAYOR",e.CATCH_THE_PAGAT="CATCH_THE_PAGAT",e.ULTI="ULTI",e.UHU="UHU",e.DOUBLE_PARTY="DOUBLE_PARTY",e.VOLAT="VOLAT",e.PHEASANT="PHEASANT",e.PHEASANT_IN_2ND="PHEASANT_IN_2ND",e.EIGHT_TAROCK="EIGHT_TAROCK",e.NINE_TAROCK="NINE_TAROCK",e.FURRY="FURRY",e.CENTRUM="CENTRUM",e.SMALL_BIRD="SMALL_BIRD",e.LARGE_BIRD="LARGE_BIRD",e.CSUZIMA="CSUZIMA",e.KING_ULTI="KING_ULTI",e.KING_UHU="KING_UHU",e.KLOPICZKY="KLOPICZKY"}(c||(c={}));var m,S,g={PARTY_LIKE:{weight:10},ULTI_LIKE:{weight:20},CENTRUM_LIKE:{weight:30},CATCHES:{weight:40},OTHERS:{weight:50}};!function(e){e.PAGAT="PAGAT",e.EAGLE="EAGLE"}(m||(m={})),function(e){e.HEART="HEART",e.SPADE="SPADE",e.CLUB="CLUB",e.DIAMOND="DIAMOND"}(S||(S={}));var I,A=[m.PAGAT,m.EAGLE],R=[S.CLUB,S.DIAMOND,S.HEART,S.SPADE],L=(r={},Object(p.a)(r,c.PARTY,{score:function(e){return e},group:"PARTY_LIKE"}),Object(p.a)(r,c.TRULL,{score:2,silent:!0}),Object(p.a)(r,c.FOUR_KING,{score:2,silent:!0}),Object(p.a)(r,c.CATCH_THE_MAYOR,{score:42,silent:!0,group:"CATCHES"}),Object(p.a)(r,c.CATCH_THE_PAGAT,{score:4,group:"CATCHES"}),Object(p.a)(r,c.ULTI,{score:10,variants:[].concat(A),silent:!0,group:"ULTI_LIKE",notWinIfSilent:!0}),Object(p.a)(r,c.UHU,{score:15,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.DOUBLE_PARTY,{score:function(e){return 4*e},silent:!0,group:"PARTY_LIKE"}),Object(p.a)(r,c.VOLAT,{score:function(e){return 6*e},silent:!0,group:"PARTY_LIKE"}),Object(p.a)(r,c.PHEASANT,{score:20,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.PHEASANT_IN_2ND,{score:20,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.EIGHT_TAROCK,{score:1,winByDefault:!0,denyContra:!0}),Object(p.a)(r,c.NINE_TAROCK,{score:2,winByDefault:!0,denyContra:!0}),Object(p.a)(r,c.FURRY,{score:25,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.CENTRUM,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.SMALL_BIRD,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.LARGE_BIRD,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.KING_ULTI,{score:15,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.KING_UHU,{score:20,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.CSUZIMA,{score:4}),Object(p.a)(r,c.KLOPICZKY,{score:3,winByDefault:!0,denyContra:!0}),r),N=function(e){return Object(T.a)({type:e},L[e])},_=function(e){return!0===(null===e||void 0===e?void 0:e.silent)},P=function(e){return function(t){return"function"===typeof t.score?t.score(e):t.score}},k=n(394),K=n(395),w=n(396),D=n(185),U=n(424),G=function(e){if(e.length<1)return e;var t=e.split(""),n=Object(D.a)(t),r=n[0],c=n.slice(1);return"".concat(r.toUpperCase()).concat(c.join("").toLowerCase())},H=function(e){return e.split("_").map(G).join(" ")};!function(e){e.DECLARER="DECLARER",e.OPPONENT="OPPONENT"}(I||(I={}));var B,Y,M=function(){return{id:Object(U.a)(),name:"",baseScore:100,sessionScore:null,gameScore:null,type:null}},X=function(e){return function(t){return Object(T.a)(Object(T.a)({},t),e)}},V=function(e){return e===I.DECLARER?I.OPPONENT:I.DECLARER},F=function(e){return new Map([[I.DECLARER,"primary"],[I.OPPONENT,"secondary"],[null,"default"]]).get(e)||"default"},W=function(e){var t=e.bidsByGroup,n=e.onAddContract,r=Object(o.useState)(!1),c=Object(v.a)(r,2),i=c[0],l=c[1];return Object(a.jsxs)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:[C()((function(e){return g[e].weight}),Object.keys(g)).map((function(e){return Object(a.jsxs)(O.a,{item:!0,spacing:1,children:[Object(a.jsx)(d.a,{variant:"caption",display:"block",color:"textSecondary",children:H(e)}),t[e].map((function(e){return Object(a.jsx)(b.a,{component:"span",mr:.5,children:Object(a.jsx)(k.a,{variant:"outlined",color:"default",onClick:function(){return function(e){var t=N(e),r=i&&!t.notWinIfSilent;n({bidType:e,taker:I.DECLARER,isSilent:i&&_(t),bidVariant:null,isWonByTaker:t.winByDefault||r||null})}(e.type)},size:"small",disabled:i&&!_(e),children:H(e.type)})},e.type)}))]},e)})),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(K.a,{control:Object(a.jsx)(w.a,{checked:i,onChange:function(){l((function(e){return!e}))},name:"silentAndWinSwitch",color:"default"}),label:"Silent & Win"})})]})},Z=n(49),z=n(21),J=n.n(z),q=function(e){var t,n=e.isSilent,r=e.bidType,c=e.bidVariant,a=e.contra,o=N(r);if(n&&!_(o))throw new Error("".concat(o.type," can not be silent."));if(c&&!(t=c,function(e){return((null===e||void 0===e?void 0:e.variants)||[]).includes(t)})(o))throw new Error("".concat(o.type," does not have ").concat(c," variant."));if(!(Math.log2(a)%1===0))throw new Error("Contra must be power of two, but ".concat(a," given."));if(a<1)throw new Error("Contra must be greater than 1, but ".concat(a," given."))},Q=function(e){var t=e.bidType,n=e.taker,r=e.partyScore,c=void 0===r?null:r,a=e.isSilent,o=void 0!==a&&a,i=e.bidVariant,l=void 0===i?null:i,u=e.isWonByTaker,s={bidType:t,bidVariant:l,contra:1,isSilent:o,isWonByTaker:void 0===u?null:u,taker:n,bidBaseScore:null!==c?J()(N,P(c))(t):null};return q(s),s},$=function(e){var t=e.isWonByTaker,n=e.bidBaseScore,r=e.contra,c=e.isSilent;return null===t||null===n?null:(t?1:-1)*n*(c?.5:r)};!function(e){e.KLOPICZKY="KLOPICZKY",e.TOOK_THREE="TOOK_THREE",e.TOOK_TWO="TOOK_TWO",e.TOOK_ONE="TOOK_ONE",e.SOLO="SOLO"}(Y||(Y={}));var ee,te=function(e){return null!==e&&[Y.TOOK_THREE,Y.TOOK_TWO,Y.TOOK_ONE,Y.SOLO].includes(e)},ne=(B={},Object(p.a)(B,Y.TOOK_THREE,1),Object(p.a)(B,Y.TOOK_TWO,2),Object(p.a)(B,Y.TOOK_ONE,3),Object(p.a)(B,Y.SOLO,4),Object(p.a)(B,Y.KLOPICZKY,0),B),re=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contracts:[],partyScoreType:t.partyScoreType||null,partyBaseScore:1,called_tarock:t.called_tarock||null,playerTypeScores:(e={},Object(p.a)(e,I.DECLARER,null),Object(p.a)(e,I.OPPONENT,null),e)}},ce=function(e){var t=le(e);return Object(T.a)(Object(T.a)({},e),{},{playerTypeScores:Object(T.a)({},t)})},ae=function(e){return function(t){var n=void 0===e.partyScoreType?t.partyScoreType:e.partyScoreType,r=void 0===e.partyBaseScore?t.partyBaseScore:e.partyBaseScore,c=null===n?null:ne[n]*r,a=null===c?t.contracts:t.contracts.map(function(e){return function(t){return Object(T.a)(Object(T.a)({},t),{},{bidBaseScore:J()(N,P(e))(t.bidType)})}}(c));return ce(Object(T.a)(Object(T.a)({},t),{},{contracts:Object(Z.a)(a)},e))}},oe=function(e){return function(t){var n=(null===e||void 0===e?void 0:e.partyScoreType)?ne[null===e||void 0===e?void 0:e.partyScoreType]:null,r=Q(Object(T.a)(Object(T.a)({},t),{},{partyScore:n}));return ce(Object(T.a)(Object(T.a)({},e),{},{contracts:[].concat(Object(Z.a)(e.contracts),[r])}))}},ie=function(e){return Object(T.a)(Object(T.a)({},e),{},{contracts:[]})},le=function(e){var t;return e.contracts.reduce((function(e,t){var n,r=$(t);if(null===r)return e;var c=function(e,t){return null===e?t:null===t?e:t+e},a=t.taker,o=V(a);return Object(T.a)(Object(T.a)({},e),{},(n={},Object(p.a)(n,a,c(e[a],r)),Object(p.a)(n,o,c(e[o],null===r?null:-1*r)),n))}),(t={},Object(p.a)(t,I.DECLARER,null),Object(p.a)(t,I.OPPONENT,null),t))},ue=n(425),se=n(357),je=n(400),Oe=n(401),be=n(402),de=n(403),fe=n(404),he=n(405),pe=n(20),ve=n(426),Te=n(397),ye=n(398),Ee=n(423),xe=n(399),Ce=function(e){var t=e.variants,n=e.selected,r=e.onChange,c=e.render,i=e.onClose,l=Object(o.useState)(!1),u=Object(v.a)(l,2),s=u[0],j=u[1],O=function(){j(!1),i&&i()};return Object(a.jsxs)(a.Fragment,{children:[c((function(){return j(!0)})),Object(a.jsxs)(ve.a,{open:s,onClose:O,children:[Object(a.jsx)(Te.a,{children:Object(a.jsx)(ye.a,{name:"variants",onChange:function(e){r(e.target.value),O()},value:n,children:t.map((function(e){return Object(a.jsx)(K.a,{control:Object(a.jsx)(Ee.a,{color:"default",value:e}),label:H(e)})}))})}),Object(a.jsx)(xe.a,{children:Object(a.jsx)(k.a,{onClick:O,variant:"outlined",children:"Cancel"})})]})]})},me=n(358),Se=function(e){var t=e.bidType,n=e.onChange,r=e.value,c=e.label,o=N(t);return _(o)?Object(a.jsx)(me.a,{children:Object(a.jsx)(K.a,{control:Object(a.jsx)(w.a,{onChange:function(e){return n(e.target.checked)},checked:r,color:"default"}),label:c?"Silent":""})}):null},ge=function(e){var t=e.value,n=e.onChange,r=e.disabled,c=function(e){return n&&n(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{component:r?"s":"span",color:r?"textPrimary":"textSecondary",children:t}),Object(a.jsx)(se.a,{title:"Double",onClick:function(){return c(2*t)},disabled:r,children:Object(a.jsx)(pe.b,{})}),Object(a.jsx)(se.a,{title:"Divide by 2",onClick:function(){return t>1&&c(t/2)},disabled:1===t||r,children:Object(a.jsx)(pe.a,{})})]})},Ie=n(135),Ae=n.n(Ie),Re=function(e){var t=e.contract,n=e.onChange,r=N(t.bidType);return r.variants?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Ce,{variants:r.variants||[],selected:t.bidVariant,onChange:function(e){n(e)},render:function(e){var n;return Object(a.jsx)(k.a,{variant:"outlined",color:"default",onClick:e,size:"small",children:H(null!==(n=t.bidVariant)&&void 0!==n?n:"Select variant")})}})}):null};!function(e){e.DELETE="DELETE",e.CHANGE="CHANGE"}(ee||(ee={}));var Le=[{field:"bidType",headerName:"Bid",valueGetter:function(e){return H(e.bidType)}},{field:"bidVariant",headerName:"Variant",valueGetter:function(e,t){return Object(a.jsx)(Re,{contract:e,onChange:function(e){return t&&t(ee.CHANGE,e)}})}},{field:"taker",headerName:"Taker",valueGetter:function(e,t){var n=V(e.taker),r=F(e.taker);return Object(a.jsx)(k.a,{color:r,onClick:function(){return t&&t(ee.CHANGE,n)},variant:"outlined",size:"small",children:e.taker})}},{field:"isSilent",headerName:"Silent",valueGetter:function(e,t){return Object(a.jsx)(Se,{bidType:e.bidType,onChange:function(e){return t&&t(ee.CHANGE,e)},value:e.isSilent})}},{field:"bidBaseScore",headerName:"Base Score"},{headerName:"Contra",field:"contra",valueGetter:function(e,t){return N(e.bidType).denyContra?null:Object(a.jsx)(ge,{onChange:function(e){return t&&t(ee.CHANGE,e)},value:e.contra,disabled:e.isSilent})}},{field:"isWonByTaker",headerName:"Win by the Taker?",valueGetter:function(e,t){var n=e.isWonByTaker,r=e.taker,c=!0===n?"Won by the Taker!":!1===n?"Lose by the Taker!":"Still unknown / Not count in final score...";return Object(a.jsx)(ue.a,{title:c,checked:!0===n,indeterminate:null===n,onClick:function(){var e=null===n||!0!==n&&null;t&&t(ee.CHANGE,e)},color:r===I.DECLARER?"primary":"secondary"})}},{field:"takerScore",headerName:"Taker score",valueGetter:function(e){return Object(a.jsx)(d.a,{variant:"button",color:e.taker===I.DECLARER?"primary":"secondary",children:$(e)})}},{field:"actions",headerName:" ",valueGetter:function(e,t){return Object(a.jsx)(se.a,{title:"Remove",onClick:function(){return t&&t(ee.DELETE,null)},children:Object(a.jsx)(pe.c,{})})}}],Ne=function(e,t){return e in t},_e=function(e){var t=e.contracts,n=e.onChange,r=e.onDelete;function c(e,t,c,a){if(c===ee.DELETE)return r(e);if(c===ee.CHANGE&&null!==t)return n(e,t,a);throw new Error("Invalid if ACTION_TYPE (".concat(c,") is CHANGE the field can not be null."))}return Object(a.jsx)(je.a,{children:Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(be.a,{children:Object(a.jsx)(de.a,{children:Le.map((function(e,t){return Object(a.jsxs)(fe.a,{children:[" ",e.headerName," "]},t)}))})}),Object(a.jsx)(he.a,{children:t.map((function(e,t){return Object(a.jsx)(de.a,{children:Le.map((function(n,r){return Object(a.jsx)(fe.a,{children:Ne(n.field,e)?n.valueGetter?n.valueGetter(e,Ae()(c)(t)(n.field)):e[n.field]:n.valueGetter?n.valueGetter(e,Ae()(c)(t)(null)):" "},r)}))},t)}))})]})})},Pe=n(406),ke=n(407),Ke=n(421),we=n(428),De=n(359),Ue=["_None_"].concat(Object(Z.a)(Object.keys({XX:"XX",XIX:"XIX",XVIII:"XVIII",XVII:"XVII",XVI:"XVI",XV:"XV",XIV:"XIV",XIII:"XIII",XII:"XII"}))),Ge=Object.keys(ne),He=function(e){var t=e.game,n=e.onChange;return Object(a.jsxs)(O.a,{container:!0,spacing:3,alignContent:"space-around",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(Pe.a,{component:"fieldset",children:[Object(a.jsx)(ke.a,{id:"called-tarock-selector",children:"Called"}),Object(a.jsx)(Ke.a,{value:t.called_tarock||"_None_",onChange:function(e){n("called_tarock",e.target.value)},labelId:"called-tarock-selector",children:Ue.map((function(e){return Object(a.jsx)(we.a,{value:e,children:"_None_"===e?"None":e},e)}))})]})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(Pe.a,{component:"fieldset",children:[Object(a.jsx)(De.a,{children:"Party Score"}),Object(a.jsx)(ye.a,{row:!0,value:t.partyScoreType,onChange:function(e){n("partyScoreType",e.target.value)},children:Ge.map((function(e){return Object(a.jsx)(K.a,{value:e,control:Object(a.jsx)(Ee.a,{color:"default"}),label:H(e)},e)}))})]})}),Object(a.jsxs)(O.a,{item:!0,children:[Object(a.jsx)(d.a,{variant:"caption",display:"block",color:"textSecondary",children:"Party Base Score"}),Object(a.jsx)(ge,{value:t.partyBaseScore,onChange:function(e){n("partyBaseScore",e)}})]})]})},Be=n(189),Ye=n.n(Be),Me=n(429),Xe=n(413),Ve=n(414),Fe=n(430),We=n(415),Ze=n(416),ze=function(e){var t=e.reduce((function(e,t){var n=Object(v.a)(e,2),r=n[0],c=n[1];return t.type===I.OPPONENT?[r,c+1]:t.type===I.DECLARER?[r+1,c]:[r,c]}),[0,0]),n=Object(v.a)(t,2);return[n[0],n[1]]},Je=function(e){return e.map((function(e){return X({type:null})(e)}))},qe=function(e){return e.map((function(e){return X({sessionScore:null})(e)}))},Qe=function(e){return e.filter((function(e){return null!==e.type}))},$e=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},et=n(190),tt=n.n(et),nt=n(412),rt=n(410),ct=n(36),at=n(411),ot=function(e){var t=e.text,n=void 0===t?"":t,r=e.title,c=void 0===r?"":r,i=e.target,l=e.onConfirm,u=Object(o.useState)(!1),s=Object(v.a)(u,2),j=s[0],O=s[1],b=Object(ct.a)(),d=Object(rt.a)(b.breakpoints.down("sm")),f=function(){O(!1)};return Object(a.jsxs)(a.Fragment,{children:[i((function(){O(!0)})),Object(a.jsxs)(ve.a,{fullScreen:d,open:j,onClose:f,children:[Object(a.jsx)(at.a,{children:c}),Object(a.jsx)(Te.a,{children:Object(a.jsx)(nt.a,{children:n})}),Object(a.jsxs)(xe.a,{children:[Object(a.jsx)(k.a,{onClick:function(){l(),f()},color:"default",variant:"outlined",children:"Ok, do it!"}),Object(a.jsx)(k.a,{onClick:f,color:"default",variant:"outlined",autoFocus:!0,children:"No, cancel it!"})]})]})]})},it=function(e){var t=e.player;return Object(a.jsx)(Me.a,{children:t.name.length>0?Object(a.jsx)(a.Fragment,{children:t.name.slice(0,2)}):Object(a.jsx)(pe.f,{})})},lt=function(e){var t=e.player,n=e.onRemove,r=e.onChange,c=function(e){return function(n){r(X(Object(p.a)({},e,n))(t))}};return Object(a.jsx)(Xe.a,{children:Object(a.jsx)(Ve.a,{children:Object(a.jsxs)(O.a,{container:!0,direction:"row",spacing:2,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(it,{player:t})}),Object(a.jsxs)(O.a,{container:!0,item:!0,direction:"column",xs:!0,spacing:2,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(Fe.a,{id:"".concat(t.id,"_name"),label:"Name",value:t.name,onChange:function(e){c("name")(e.target.value)}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(Fe.a,{id:"".concat(t.id,"_baseScore"),label:"Base Score",type:"number",value:t.baseScore,onChange:function(e){var t=e.target.value;c("baseScore")(t.length>0?Number(t):null)}})})]}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ot,{title:"Do you want to remove ".concat(t.name||"this player","?"),text:"It will remove the player, and deletes its score too.",target:function(e){return Object(a.jsx)(se.a,{onClick:e,children:Object(a.jsx)(pe.c,{})})},onConfirm:function(){return n(t)}})})]})})})},ut=function(e){var t=e.player,n=e.onChange,r=F(t.type),c=null!==t.type,o=null!==t.gameScore,i=c&&o?" (".concat(t.gameScore,")"):"",l=null!==t.sessionScore?t.sessionScore+t.baseScore:t.baseScore,u=l>180;return Object(a.jsxs)(Xe.a,{children:[Object(a.jsx)(We.a,{avatar:Object(a.jsx)(it,{player:t}),title:t.name,subheader:Object(a.jsxs)("span",{children:[u&&Object(a.jsx)(tt.a,{fontSize:"small",color:"action"}),"".concat(l).concat(i)]})}),Object(a.jsx)(Ze.a,{children:Object(a.jsx)(k.a,{variant:"outlined",color:r,onClick:function(){var e;n(X({type:(e=t.type,new Map([[I.DECLARER,I.OPPONENT],[I.OPPONENT,null],[null,I.DECLARER]]).get(e)||null)})(t))},children:t.type||"Not playing"})})]})},st=function(e){var t=e.players,n=e.onPlayerListChange,r=e.onSaveScores,c=e.saveDisabled,i=e.onResetPlayers,l=e.onResetScores,u=Object(o.useState)(!1),s=Object(v.a)(u,2),j=s[0],b=s[1],d=function(e){var r;J()((r=t,function(e){return r.filter((function(t){return t.id!==e.id}))}),n)(e)},f=function(e){var r;J()((r=t,function(e){return r.map((function(t){return t.id===e.id?e:t}))}),n)(e)};return Object(a.jsxs)(O.a,{container:!0,spacing:1,children:[Object(a.jsxs)(O.a,{item:!0,container:!0,direction:"row",alignItems:"center",spacing:1,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(se.a,{onClick:function(){var e;J()(M,(e=t,function(t){return[].concat(Object(Z.a)(e),[t])}),n)()},title:"Add new player",children:Object(a.jsx)(pe.g,{})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(se.a,{onClick:function(){return b((function(e){return!e}))},title:j?"Finish editing":"Edit user properties",children:j?Object(a.jsx)(pe.d,{}):Object(a.jsx)(pe.e,{})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(k.a,{variant:"outlined",disabled:c,onClick:r,children:"Save scores"})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ot,{title:"Do you want to reset the Players?",text:"It will remove all players, and also delete their scores.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Players"})},onConfirm:i})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ot,{title:"Do you want to reset the Scores?",text:"It will reset the scores to the players' base score, but keeps all the players.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Scores"})},onConfirm:l})})]}),t.map((function(e){return Object(a.jsx)(O.a,{item:!0,xs:!!j&&3,children:j?Object(a.jsx)(lt,{onChange:f,onRemove:d,player:e},e.id):Object(a.jsx)(ut,{player:e,onChange:f},e.id)})}))]})},jt=n(191),Ot=n.n(jt),bt=n(102),dt=function(e){return function(t){return t.map((function(n){var r,c=function(e){return function(t){var n=ze(e),r=Object(v.a)(n,2),c=r[0],a=r[1],o=t.playerTypeScores[I.OPPONENT],i=t.playerTypeScores[I.DECLARER];return null===o||null===i?[null,null]:2===a&&2===c?[i,o]:3===a&&1===c?[3*i,o]:1===a&&3===c?[i,3*o]:[null,null]}}(t)(e),a=Object(v.a)(c,2),o=a[0],i=a[1],l=(r={},Object(p.a)(r,I.OPPONENT,i),Object(p.a)(r,I.DECLARER,o),r);return Object(T.a)(Object(T.a)({},n),{},{gameScore:null===n.type?null:l[n.type]})}))}},ft=function(e){return function(t){var n=ze(e),r=Object(bt.isEqual)(n,[1,3])||Object(bt.isEqual)(n,[2,2])||Object(bt.isEqual)(n,[3,1]),c=null!==t.playerTypeScores[I.DECLARER]&&null!==t.playerTypeScores[I.OPPONENT];return r&&c}},ht=function(e){return Boolean(void 0!==e&&null!==e)},pt=function(e,t){return(ht(e)?e:0)+(ht(t.gameScore)?t.gameScore:0)},vt=function(e){return e.reduce((function(e,t){return Ot()(pt)(e,t)}),{})},Tt=n(64),yt=n(65),Et=n(66),xt=n(193),Ct=function(e){Object(yt.a)(n,e);var t=Object(Et.a)(n);function n(e,r){var c;return Object(Tt.a)(this,n),(c=t.call(this,e)).userMessage=void 0,c.userMessage=void 0===r?"Ooops. Someting went wrong!":r,c}return n}(Object(xt.a)(Error)),mt="tarockSheetState",St=function(e){Object(yt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(Tt.a)(this,n),(r=t.call(this,e,"Saving is not supported!")).name="NotSupportedStorageError",r}return n}(Ct),gt=function(e){Object(yt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(Tt.a)(this,n),(r=t.call(this,e,"Not able to save or load your changes! It is an application error!")).name="WrongDataStorageError",r}return n}(Ct),It=function(e){Object(yt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(Tt.a)(this,n),(r=t.call(this,e,"Not able to save your changes! Maybe the storage is full.")).name="UnsuccessfulSavingStorageError",r}return n}(Ct),At=function(){var e=Object.keys(c).map((function(e){return N(e)}));return E()((function(e){return e.group||"OTHERS"}),e)}(),Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=function(){return Boolean(window.localStorage)},n=function(){if(!t())throw new St},r=window.localStorage,c=function(e){try{return JSON.stringify(e)}catch(t){throw new gt(t.message)}},a=function(e){try{return JSON.parse(e)}catch(t){throw new gt(t.message)}},o=function(t){return"".concat(e,"_").concat(t)},i=function(e,t){n();try{r.setItem(o(e),c(t))}catch(a){if(a instanceof gt)throw a;throw new It(a.message)}},l=function(e){n(),r.removeItem(e)},u=function(e){n();var t=r.getItem(o(e));return null===t?null:a(t)};return{isSupported:t,create:i,update:i,delete:l,read:u}}(),Lt=function(){var e,t,n,r=Object(o.useState)(null!==(e=Rt.read("game"))&&void 0!==e?e:re()),i=Object(v.a)(r,2),l=i[0],u=i[1],s=Object(o.useState)(null!==(t=Rt.read("players"))&&void 0!==t?t:[]),j=Object(v.a)(s,2),b=j[0],d=j[1],f=Object(o.useState)(null!==(n=Rt.read("gameScoreList"))&&void 0!==n?n:[]),h=Object(v.a)(f,2),y=h[0],E=h[1];Object(o.useEffect)((function(){d(dt(l))}),[l]),Object(o.useEffect)((function(){if(Rt.isSupported())try{Rt.update("game",l),Rt.update("players",b),Rt.update("gameScoreList",y)}catch(e){console.error(e)}}),[l,b,y]);var x=function(e){J()(dt(l),d)(e)},C=function(e){J()(vt,function(e){return function(t){return e.map((function(e){return void 0===t[e.id]?e:X({sessionScore:t[e.id]})(e)}))}}(b),Je,x)(e),E(e),u(re())},m=null!==l.partyScoreType;return Object(a.jsxs)(O.a,{container:!0,spacing:3,direction:"column",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(st,{players:b,onPlayerListChange:function(e){x(e)},onSaveScores:function(){var e=J()(Qe,$e,Ye()(y))(b);C(e)},saveDisabled:!ft(b)(l),onResetPlayers:function(){u(re()),C([]),x([])},onResetScores:function(){C([]),J()(qe,Je,x)(b)}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(O.a,{item:!0,container:!0,spacing:1,direction:"row",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(He,{game:l,onChange:function(e,t){u((function(n){var r="partyScoreType"===e,a=n.partyScoreType===Y.KLOPICZKY&&te(t),o=te(n.partyScoreType)&&t===Y.KLOPICZKY,i=null===n.partyScoreType&&t===Y.KLOPICZKY,u=te(t)&&0===n.contracts.length;if(r&&(a||o||i||u)){var s=te(t)?Q({bidType:c.PARTY,taker:I.DECLARER}):Q({bidType:c.KLOPICZKY,taker:I.DECLARER,isWonByTaker:!0});return J()(ie,function(e){return function(t){return oe(t)(e)}}(s),ae(Object(p.a)({},e,t)))(l)}return ae(Object(p.a)({},e,t))(l)}))}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ot,{title:"Do you really want to reset this Game?",text:"It will clear up the game's properties and remove all contracts without saving them, but keep the players' scores.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Game"})},onConfirm:function(){return u(re())}})})]})}),Object(a.jsx)(O.a,{item:!0,children:m&&Object(a.jsx)(W,{bidsByGroup:At,onAddContract:function(e){return u(J()(Q,oe(l))(e))}},null===l.partyScoreType?1:0)}),Object(a.jsx)(O.a,{item:!0,children:m&&Object(a.jsx)(_e,{contracts:null===l||void 0===l?void 0:l.contracts,onChange:function(e,t,n){var r;u(J()((r=Object(p.a)({},t,n),function(e){var t=Object(T.a)(Object(T.a)({},e),r);return q(t),t}),function(e){return function(t){return function(n){return ce(Object(T.a)(Object(T.a)({},e),{},{contracts:e.contracts.map((function(e,r){return r===t?Object(T.a)({},n):e}))}))}}}(l)(e))(l.contracts[e]))},onDelete:function(e){return u(function(e){return function(t){return ce(Object(T.a)(Object(T.a)({},e),{},{contracts:e.contracts.filter((function(e,n){return n!==t}))}))}}(l)(e))}})})]})},Nt=Object(s.a)((function(e){return{container:{padding:e.spacing(4)}}}));var _t=function(){var e=Nt();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{position:"static",children:Object(a.jsxs)(O.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(b.a,{mt:1,ml:1,fontSize:"h3.fontSize",children:Object(a.jsx)(h.a,{color:"white"})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(d.a,{variant:"h3",children:"Tarock Sheet"})})]})}),Object(a.jsx)(f.a,{className:e.container,children:Object(a.jsx)(Lt,{})})]})},Pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,433)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(_t,{})}),document.getElementById("root")),Pt()}},[[353,1,2]]]);
//# sourceMappingURL=main.7e66bea4.chunk.js.map