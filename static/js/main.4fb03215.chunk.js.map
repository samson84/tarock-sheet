{"version":3,"sources":["lib/bid.ts","lib/player.ts","lib/util.ts","lib/game.ts","components/ContractSelector.tsx","lib/contract.ts","components/ContractsTable.tsx","components/VariantSelector.tsx","components/SilentSwitch.tsx","components/MultiplierSelector.tsx","components/GameProperties.tsx","components/Players.tsx","lib/gameScoreList.ts","lib/error.ts","services/localStorage.ts","components/TarockSheet.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["BID_TYPE","SMALLEST_VARIANT","CARD_SHAPE_VARIANT","BID_GROUPS","PARTY_LIKE","weight","ULTI_LIKE","CENTRUM_LIKE","CATCHES","OTHERS","PLAYER_TYPE","SMALLEST_VARIANTS","PAGAT","EAGLE","CARD_SHAPE_VARIANTS","CLUB","DIAMOND","HEART","SPADE","BIDS","PARTY","score","party","group","TRULL","silent","FOUR_KING","CATCH_THE_MAYOR","CATCH_THE_PAGAT","ULTI","variants","notWinIfSilent","UHU","DOUBLE_PARTY","VOLAT","PHEASANT","PHEASANT_IN_2ND","EIGHT_TAROCK","winByDefault","denyContra","NINE_TAROCK","FURRY","CENTRUM","SMALL_BIRD","LARGE_BIRD","KING_ULTI","KING_UHU","CSUZIMA","KLOPICZKY","getBid","type","canSilent","bid","getBidScore","partyScore","makeFirstLetterCapital","word","length","split","first","rest","toUpperCase","join","toLowerCase","upperCaseToWords","upperCased","map","PARTY_SCORE_TYPE","updatePlayer","updates","player","getAnotherPlayerType","playerType","DECLARER","OPPONENT","getPlayerTypeColor","Map","get","getPlayerNumberByType","players","reduce","declarersNumber","opponentsNumber","clearPlayersType","resetPlayerScore","filterPlayersInGame","filter","createPlayerListObject","playerList","playerListObject","id","ContractSelector","bidsByGroup","onAddContract","useState","silentAndWin","setSilentAndWin","Grid","container","spacing","alignItems","sortBy","g","Object","keys","item","variant","display","color","Box","component","mr","Button","onClick","bidType","shouldWinWithSilent","taker","bidVariant","winByTaker","handleClick","size","disabled","FormControlLabel","control","Switch","checked","onChange","prev","name","label","validateContract","contract","contra","Error","includes","Math","log2","createContract","bidBaseScore","flow","calculateContract","ACTION_TYPE","PARTY_SCORE","TOOK_THREE","TOOK_TWO","TOOK_ONE","SOLO","createGame","props","contracts","partyScoreType","partyBaseScore","called_tarock","scores","updateGameWithScores","game","calculateGame","updateGame","undefined","updateBidBaseScore","addContract","updatedContract","removeAllContract","addScore","prevScore","another","VariantSelector","selected","render","onClose","open","setOpen","handleClose","Dialog","DialogContent","RadioGroup","event","target","value","Radio","DialogActions","SilentSwitch","FormGroup","MultiplierSelector","handleChange","IconButton","title","VariantSelectorModal","handleOpen","columns","field","headerName","valueGetter","onAction","CHANGE","newTaker","Checkbox","indeterminate","nextValue","_","DELETE","isContractField","ContractsTable","onDelete","handleAction","index","actionType","TableContainer","Table","TableHead","TableRow","column","TableCell","TableBody","rowIndex","cellIndex","curry","calledTarockOptions","XX","XIX","XVIII","XVII","XVI","XV","XIV","XIII","XII","partyScoreOptions","GameProperties","alignContent","FormControl","InputLabel","Select","labelId","option","MenuItem","FormLabel","row","PlayerAvatar","Avatar","slice","EditablePlayerItem","onRemove","prop","Card","CardContent","direction","xs","TextField","baseScore","Number","PlayerItem","playing","hasCurrentScore","currentScore","currentScoreText","CardHeader","avatar","subheader","CardActions","Players","onPlayerListChange","onSaveScores","saveDisabled","onResetPlayers","onResetScores","edit","setEdit","handleRemove","removePlayer","updated","updatePlayerAt","v4uuid","getCurrentScoreForPlayers","numberOfDeclarers","numberOfOpponents","opponentsGameScore","declarersGameScore","getScore","declarersScore","opponentsScore","isReadyForSave","numbers","playerNumberValid","isEqual","gameScoreValid","defined","Boolean","scoreSumAssigner","sumPlayerScores","playerListObjects","assignWith","ApplicationError","message","userMessage","PREFIX","NotSupportedStorageError","WrongDataStorageError","UnsuccessfulSavingStorageError","allBidsByGroup","bids","b","groupBy","getAllBidsByGorup","storage","prefix","isSupported","window","localStorage","_checkSupport","_instance","_serialize","data","JSON","stringify","error","_unserialize","str","parse","getStorageKey","key","create","setItem","remove","removeItem","read","serialized","getItem","update","delete","storageInitializer","TarockSheet","setGame","setPlayers","gameScoreList","setGameScoreList","useEffect","console","updatePlayersState","updateGameScoreListState","assignScoresToPlayers","updatedGameScoreList","concat","addContractFlipped","i","updateGameContract","removeContract","useAppStyle","makeStyles","theme","padding","App","classes","AppBar","position","Container","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4fb03215.chunk.js","sourcesContent":["import groupBy from \"lodash/fp/groupBy\";\nimport sortBy from \"lodash/fp/sortBy\";\n\nexport interface Bid extends BidData {\n  type: BID_TYPE;\n}\n\ninterface BidData {\n  score: number | ((party: number) => number);\n  group?: BidGroupType;\n  variants?: BidVariant[];\n  silent?: boolean;\n  winByDefault?: boolean;\n  notWinIfSilent?: boolean;\n  denyContra?: boolean;\n}\n\nexport enum BID_TYPE {\n  PARTY = \"PARTY\",\n  TRULL = \"TRULL\",\n  FOUR_KING = \"FOUR_KING\",\n  CATCH_THE_MAYOR = \"CATCH_THE_MAYOR\",\n  CATCH_THE_PAGAT = \"CATCH_THE_PAGAT\",\n  ULTI = \"ULTI\",\n  UHU = \"UHU\",\n  DOUBLE_PARTY = \"DOUBLE_PARTY\",\n  VOLAT = \"VOLAT\",\n  PHEASANT = \"PHEASANT\",\n  PHEASANT_IN_2ND = \"PHEASANT_IN_2ND\",\n  EIGHT_TAROCK = \"EIGHT_TAROCK\",\n  NINE_TAROCK = \"NINE_TAROCK\",\n  FURRY = \"FURRY\",\n  CENTRUM = \"CENTRUM\",\n  SMALL_BIRD = \"SMALL_BIRD\",\n  LARGE_BIRD = \"LARGE_BIRD\",\n  CSUZIMA = \"CSUZIMA\",\n  KING_ULTI = \"KING_ULTI\",\n  KING_UHU = \"KING_UHU\",\n  KLOPICZKY = \"KLOPICZKY\",\n}\n\nexport type BidGroupType =\n  | \"PARTY_LIKE\"\n  | \"ULTI_LIKE\"\n  | \"CENTRUM_LIKE\"\n  | \"CATCHES\"\n  | \"OTHERS\";\nconst BID_GROUPS: { [K in BidGroupType]: { weight: number } } = {\n  PARTY_LIKE: { weight: 10 },\n  ULTI_LIKE: { weight: 20 },\n  CENTRUM_LIKE: { weight: 30 },\n  CATCHES: { weight: 40 },\n  OTHERS: { weight: 50 },\n};\nexport const bidGroupNamesByWeight = () =>\n  sortBy((g) => BID_GROUPS[g as BidGroupType].weight, Object.keys(BID_GROUPS));\n\nexport enum SMALLEST_VARIANT {\n  PAGAT = \"PAGAT\",\n  EAGLE = \"EAGLE\",\n}\n\nexport enum CARD_SHAPE_VARIANT {\n  HEART = \"HEART\",\n  SPADE = \"SPADE\",\n  CLUB = \"CLUB\",\n  DIAMOND = \"DIAMOND\",\n}\n\nconst SMALLEST_VARIANTS = [SMALLEST_VARIANT.PAGAT, SMALLEST_VARIANT.EAGLE];\nconst CARD_SHAPE_VARIANTS = [\n  CARD_SHAPE_VARIANT.CLUB,\n  CARD_SHAPE_VARIANT.DIAMOND,\n  CARD_SHAPE_VARIANT.HEART,\n  CARD_SHAPE_VARIANT.SPADE,\n];\n\nexport type BidVariant = SMALLEST_VARIANT | CARD_SHAPE_VARIANT;\n\nconst BIDS: { [key in BID_TYPE]: BidData } = {\n  [BID_TYPE.PARTY]: { score: (party: number) => party, group: \"PARTY_LIKE\" },\n  [BID_TYPE.TRULL]: { score: 2, silent: true },\n  [BID_TYPE.FOUR_KING]: { score: 2, silent: true },\n  [BID_TYPE.CATCH_THE_MAYOR]: { score: 42, silent: true, group: \"CATCHES\" },\n  [BID_TYPE.CATCH_THE_PAGAT]: { score: 4, group: \"CATCHES\" },\n  [BID_TYPE.ULTI]: {\n    score: 10,\n    variants: [...SMALLEST_VARIANTS],\n    silent: true,\n    group: \"ULTI_LIKE\",\n    notWinIfSilent: true,\n  },\n  [BID_TYPE.UHU]: {\n    score: 15,\n    variants: [...SMALLEST_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.DOUBLE_PARTY]: {\n    score: (party: number) => party * 4,\n    silent: true,\n    group: \"PARTY_LIKE\",\n  },\n  [BID_TYPE.VOLAT]: {\n    score: (party: number) => party * 6,\n    silent: true,\n    group: \"PARTY_LIKE\",\n  },\n  [BID_TYPE.PHEASANT]: {\n    score: 20,\n    variants: [...SMALLEST_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.PHEASANT_IN_2ND]: {\n    score: 20,\n    variants: [...SMALLEST_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.EIGHT_TAROCK]: { score: 1, winByDefault: true, denyContra: true },\n  [BID_TYPE.NINE_TAROCK]: { score: 2, winByDefault: true, denyContra: true },\n  [BID_TYPE.FURRY]: {\n    score: 25,\n    variants: [...CARD_SHAPE_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.CENTRUM]: { score: 10, group: \"CENTRUM_LIKE\" },\n  [BID_TYPE.SMALL_BIRD]: { score: 10, group: \"CENTRUM_LIKE\" },\n  [BID_TYPE.LARGE_BIRD]: { score: 10, group: \"CENTRUM_LIKE\" },\n  [BID_TYPE.KING_ULTI]: {\n    score: 15,\n    variants: [...CARD_SHAPE_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.KING_UHU]: {\n    score: 20,\n    variants: [...CARD_SHAPE_VARIANTS],\n    group: \"ULTI_LIKE\",\n  },\n  [BID_TYPE.CSUZIMA]: { score: 4 },\n  [BID_TYPE.KLOPICZKY]: { score: 3, winByDefault: true, denyContra: true },\n};\n\nexport const getBid = (type: BID_TYPE): Bid => ({ type, ...BIDS[type] });\n\nexport const getAllBids = (): Bid[] =>\n  Object.keys(BID_TYPE).map((b: BID_TYPE) => getBid(b));\n\nexport type BidsByGroup = { [K in BidGroupType]: Bid[] };\nexport const getAllBidsByGorup = (): BidsByGroup => {\n  const bids = getAllBids();\n  return groupBy((bid) => bid.group || \"OTHERS\", bids) as BidsByGroup;\n};\n\nexport const canSilent = (bid: Bid): boolean => bid?.silent === true;\n\nexport const getBidScore = (partyScore: number) => (bid: Bid): number =>\n  typeof bid.score === \"function\" ? bid.score(partyScore) : bid.score;\n\nexport const hasVariant = (variant: BidVariant) => (bid: Bid): boolean => {\n  const variants = bid?.variants || [];\n  return variants.includes(variant);\n};\n","import { createId, Id } from \"./util\";\n\nexport enum PLAYER_TYPE {\n  DECLARER = \"DECLARER\",\n  OPPONENT = \"OPPONENT\",\n}\nexport interface Player {\n  id: Id;\n  name: string;\n  baseScore: number;\n  score: PlayerScore;\n  currentScore: PlayerScore;\n  type: PLAYER_TYPE | null;\n}\nexport type PlayerScore = number | null;\n\nexport const createPlayer = (): Player => ({\n  id: createId(),\n  name: \"\",\n  baseScore: 100,\n  score: null,\n  currentScore: null,\n  type: null,\n});\n\nexport type UpdatePlayerProps = Partial<Omit<Player, \"id\">>;\nexport const updatePlayer = (updates: UpdatePlayerProps) => (\n  player: Player\n): Player => ({\n  ...player,\n  ...updates,\n});\n\nexport const getAnotherPlayerType = (playerType: PLAYER_TYPE): PLAYER_TYPE =>\n  playerType === PLAYER_TYPE.DECLARER\n    ? PLAYER_TYPE.OPPONENT\n    : PLAYER_TYPE.DECLARER;\n\nexport type PlayerList = Player[];\nexport const addPlayer = (player: Player) => (\n  playerList: PlayerList\n): PlayerList => {\n  return [...playerList, player];\n};\n\nexport const removePlayer = (player: Player) => (\n  playerList: PlayerList\n): PlayerList => playerList.filter(({ id }) => id !== player.id);\n\nexport const updatePlayerAt = (updated: Player) => (\n  playerList: PlayerList\n): PlayerList =>\n  playerList.map((player) => (player.id === updated.id ? updated : player));\n\ntype PlayerTypeColor = \"primary\" | \"secondary\" | \"default\";\nexport const getPlayerTypeColor = (\n  playerType: PLAYER_TYPE | null\n): PlayerTypeColor => {\n  const mapper = new Map<PLAYER_TYPE | null, PlayerTypeColor>([\n    [PLAYER_TYPE.DECLARER, \"primary\"],\n    [PLAYER_TYPE.OPPONENT, \"secondary\"],\n    [null, \"default\"],\n  ]);\n  return mapper.get(playerType) || \"default\";\n};\n\nexport const rotatePlayerTypeWithNull = (\n  playerType: PLAYER_TYPE | null\n): PLAYER_TYPE | null => {\n  const mapper = new Map([\n    [PLAYER_TYPE.DECLARER, PLAYER_TYPE.OPPONENT],\n    [PLAYER_TYPE.OPPONENT, null],\n    [null, PLAYER_TYPE.DECLARER],\n  ]);\n  return mapper.get(playerType) || null;\n};\n\nexport const getPlayerNumberByType = (\n  players: PlayerList\n): [number, number] => {\n  const [declarersNumber, opponentsNumber] = players.reduce(\n    ([declarersNumber, opponentsNumber], player) => {\n      if (player.type === PLAYER_TYPE.OPPONENT) {\n        return [declarersNumber, opponentsNumber + 1];\n      } else if (player.type === PLAYER_TYPE.DECLARER) {\n        return [declarersNumber + 1, opponentsNumber];\n      } else {\n        return [declarersNumber, opponentsNumber];\n      }\n    },\n    [0, 0]\n  );\n  return [declarersNumber, opponentsNumber];\n};\n\nexport const clearPlayersType = (players: PlayerList): PlayerList =>\n  players.map((player) => updatePlayer({ type: null })(player));\n\nexport const resetPlayerScore = (players: PlayerList): PlayerList =>\n  players.map((player) => updatePlayer({ score: null })(player));\n\nexport const filterPlayersInGame = (players: PlayerList): PlayerList =>\n  players.filter((player) => player.type !== null);\n\nexport type PlayerListObject = { [key: string]: Player };\nexport const createPlayerListObject = (\n  playerList: PlayerList\n): PlayerListObject => {\n  return playerList.reduce((playerListObject, player) => {\n    playerListObject[player.id as string] = player;\n    return playerListObject;\n  }, {} as PlayerListObject);\n};\n","import { v4 as v4uuid } from \"uuid\";\n\nconst makeFirstLetterCapital = (word: string): string => {\n  if (word.length < 1) {\n    return word;\n  }\n  const [first, ...rest] = word.split(\"\");\n  return `${first.toUpperCase()}${rest.join(\"\").toLowerCase()}`;\n};\n\nexport const upperCaseToWords = (upperCased: string): string => {\n  return upperCased.split(\"_\").map(makeFirstLetterCapital).join(\" \");\n};\n\nexport type Id = string;\nexport const createId = (): Id => v4uuid();\n","import {\n  calculateContract,\n  Contract,\n  updateBidBaseScore,\n  createContract,\n} from \"./contract\";\nimport { getAnotherPlayerType, PLAYER_TYPE, PlayerScore } from \"./player\";\n\ntype GameScore = {\n  [PLAYER_TYPE.DECLARER]: PlayerScore;\n  [PLAYER_TYPE.OPPONENT]: PlayerScore;\n};\nexport interface Game {\n  contracts: Contract[];\n  partyScoreType: PARTY_SCORE_TYPE | null;\n  partyBaseScore: number;\n  called_tarock: CalledTarockType | null;\n  scores: GameScore;\n}\n\ntype CalledTarockType =\n  | \"XX\"\n  | \"XIX\"\n  | \"XVIII\"\n  | \"XVII\"\n  | \"XVI\"\n  | \"XV\"\n  | \"XIV\"\n  | \"XIII\"\n  | \"XII\";\n\nexport const CALLED_TAROCK: { [K in CalledTarockType]: CalledTarockType } = {\n  XX: \"XX\",\n  XIX: \"XIX\",\n  XVIII: \"XVIII\",\n  XVII: \"XVII\",\n  XVI: \"XVI\",\n  XV: \"XV\",\n  XIV: \"XIV\",\n  XIII: \"XIII\",\n  XII: \"XII\",\n};\n\nexport enum PARTY_SCORE_TYPE {\n  KLOPICZKY = \"KLOPICZKY\",\n  TOOK_THREE = \"TOOK_THREE\",\n  TOOK_TWO = \"TOOK_TWO\",\n  TOOK_ONE = \"TOOK_ONE\",\n  SOLO = \"SOLO\",\n}\nexport type PartyScoreValue = 0 | 1 | 2 | 3 | 4;\n\nexport const isPartyLike = (partyScoreType: PARTY_SCORE_TYPE): boolean =>\n  [\n    PARTY_SCORE_TYPE.TOOK_THREE,\n    PARTY_SCORE_TYPE.TOOK_TWO,\n    PARTY_SCORE_TYPE.TOOK_ONE,\n    PARTY_SCORE_TYPE.SOLO,\n  ].includes(partyScoreType);\n\nexport const PARTY_SCORE: { [K in PARTY_SCORE_TYPE]: PartyScoreValue } = {\n  [PARTY_SCORE_TYPE.TOOK_THREE]: 1,\n  [PARTY_SCORE_TYPE.TOOK_TWO]: 2,\n  [PARTY_SCORE_TYPE.TOOK_ONE]: 3,\n  [PARTY_SCORE_TYPE.SOLO]: 4,\n  [PARTY_SCORE_TYPE.KLOPICZKY]: 0,\n};\n\ninterface CreateGameProps {\n  partyScoreType?: PARTY_SCORE_TYPE;\n  called_tarock?: CalledTarockType;\n}\nexport const createGame = (props: CreateGameProps = {}): Game => ({\n  contracts: [],\n  partyScoreType: props.partyScoreType || null,\n  partyBaseScore: 1,\n  called_tarock: props.called_tarock || null,\n  scores: {\n    [PLAYER_TYPE.DECLARER]: null,\n    [PLAYER_TYPE.OPPONENT]: null,\n  },\n});\n\nconst updateGameWithScores = (game: Game): Game => {\n  const scores = calculateGame(game);\n\n  return {\n    ...game,\n    scores: { ...scores },\n  };\n};\n\nexport interface UpdateGameProps {\n  partyScoreType?: PARTY_SCORE_TYPE;\n  called_tarock?: CalledTarockType | null;\n  partyBaseScore?: number;\n}\nexport const updateGame = (updates: UpdateGameProps) => (game: Game): Game => {\n  const partyScoreType =\n    updates.partyScoreType === undefined\n      ? game.partyScoreType\n      : updates.partyScoreType;\n  const partyBaseScore =\n    updates.partyBaseScore === undefined\n      ? game.partyBaseScore\n      : updates.partyBaseScore;\n  const partyScore =\n    partyScoreType === null\n      ? null\n      : PARTY_SCORE[partyScoreType] * partyBaseScore;\n  const contracts =\n    partyScore === null\n      ? game.contracts\n      : game.contracts.map(updateBidBaseScore(partyScore));\n\n  return updateGameWithScores({\n    ...game,\n    contracts: [...contracts],\n    ...updates,\n  });\n};\n\nexport const addContractFlipped = (contract: Contract) => (game: Game): Game =>\n  addContract(game)(contract);\n\nexport const addContract = (game: Game) => (contract: Contract): Game => {\n  const partyScore = game?.partyScoreType\n    ? PARTY_SCORE[game?.partyScoreType]\n    : null;\n  const updatedContract = createContract({ ...contract, partyScore });\n  return updateGameWithScores({\n    ...game,\n    contracts: [...game.contracts, updatedContract],\n  });\n};\n\nexport const removeContract = (game: Game) => (index: number): Game => {\n  return updateGameWithScores({\n    ...game,\n    contracts: game.contracts.filter((_, i) => i !== index),\n  });\n};\n\nexport const removeAllContract = (game: Game): Game => ({\n  ...game,\n  contracts: [],\n});\n\nexport const updateGameContract = (game: Game) => (index: number) => (\n  updated: Contract\n): Game => {\n  return updateGameWithScores({\n    ...game,\n    contracts: game.contracts.map((contract, i) =>\n      i === index ? { ...updated } : contract\n    ),\n  });\n};\n\nexport const calculateGame = (game: Game): GameScore => {\n  return game.contracts.reduce(\n    (partyScore, contract) => {\n      const score = calculateContract(contract);\n      if (score === null) {\n        return partyScore;\n      }\n\n      const addScore = (\n        prevScore: PlayerScore,\n        score: PlayerScore\n      ): PlayerScore => {\n        if (prevScore === null) {\n          return score;\n        } else {\n          return score === null ? prevScore : score + prevScore;\n        }\n      };\n\n      const taker = contract.taker;\n      const another = getAnotherPlayerType(taker);\n\n      return {\n        ...partyScore,\n        [taker]: addScore(partyScore[taker], score),\n        [another]: addScore(\n          partyScore[another],\n          score === null ? null : score * -1\n        ),\n      };\n    },\n    {\n      [PLAYER_TYPE.DECLARER]: null,\n      [PLAYER_TYPE.OPPONENT]: null,\n    }\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Button,\n  Grid,\n  Box,\n  Typography as T,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  BidsByGroup,\n  BidGroupType,\n  bidGroupNamesByWeight,\n  BID_TYPE,\n  getBid,\n  canSilent,\n} from \"../lib/bid\";\nimport { upperCaseToWords } from \"../lib/util\";\nimport { Contract } from \"../lib/contract\";\nimport { PLAYER_TYPE } from \"../lib/player\";\n\ninterface BidSelectorProps {\n  bidsByGroup: BidsByGroup;\n  onAddContract: (contract: Partial<Contract>) => void;\n}\nconst ContractSelector = ({ bidsByGroup, onAddContract }: BidSelectorProps) => {\n  const [silentAndWin, setSilentAndWin] = useState<boolean>(false);\n\n  const handleSwitch = () => {\n    setSilentAndWin((prev: boolean) => !prev);\n  };\n  const handleClick = (bidType: BID_TYPE) => {\n    const bid = getBid(bidType);\n    const shouldWinWithSilent = silentAndWin && !bid.notWinIfSilent;\n    onAddContract({\n      bidType: bidType,\n      taker: PLAYER_TYPE.DECLARER,\n      silent: silentAndWin && canSilent(bid),\n      bidVariant: null,\n      winByTaker: bid.winByDefault || shouldWinWithSilent || null,\n    });\n  };\n  return (\n    <Grid container spacing={1} alignItems=\"flex-end\">\n      {bidGroupNamesByWeight().map((group) => (\n        <Grid item key={group} spacing={1}>\n          <T variant=\"caption\" display=\"block\" color=\"textSecondary\">\n            {upperCaseToWords(group)}\n          </T>\n          {bidsByGroup[group as BidGroupType].map((bid) => (\n            <Box key={bid.type} component=\"span\" mr={0.5}>\n              <Button\n                variant=\"outlined\"\n                color=\"default\"\n                onClick={() => handleClick(bid.type)}\n                size=\"small\"\n                disabled={silentAndWin && !canSilent(bid)}\n              >\n                {upperCaseToWords(bid.type)}\n              </Button>\n            </Box>\n          ))}\n        </Grid>\n      ))}\n      <Grid item>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={silentAndWin}\n              onChange={handleSwitch}\n              name=\"silentAndWinSwitch\"\n              color=\"default\"\n            />\n          }\n          label=\"Silent & Win\"\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ContractSelector;\n","import { PLAYER_TYPE } from \"./player\";\nimport {\n  BidVariant,\n  BID_TYPE,\n  canSilent,\n  hasVariant,\n  getBid,\n  getBidScore,\n} from \"./bid\";\nimport flow from \"lodash/fp/flow\";\nimport pick from \"lodash/fp/pick\";\nimport isEqual from \"lodash/fp/isEqual\";\nimport groupBy from \"lodash/fp/groupBy\";\nimport { PartyScoreValue } from \"./game\";\n\nconst CONTRA_NAMES = [\"None\", \"Contra\", \"Recontra\", \"Subcontra\", \"Mortcontra\"];\n\ntype ContraMultiplier = number;\nexport interface Contract {\n  bidType: BID_TYPE;\n  bidBaseScore: number | null;\n  bidVariant: BidVariant | null;\n  contra: ContraMultiplier;\n  winByTaker: boolean | null;\n  taker: PLAYER_TYPE;\n  silent: boolean;\n}\n\nconst validateContract = (contract: Contract): void | undefined => {\n  const { silent, bidType, bidVariant, contra } = contract;\n  const bid = getBid(bidType);\n  if (silent && !canSilent(bid)) {\n    throw new Error(`${bid.type} can not be silent.`);\n  }\n  if (bidVariant && !hasVariant(bidVariant)(bid)) {\n    throw new Error(`${bid.type} does not have ${bidVariant} variant.`);\n  }\n  const isPowerOfTwo = Math.log2(contra) % 1 === 0;\n  if (!isPowerOfTwo) {\n    throw new Error(`Contra must be power of two, but ${contra} given.`);\n  }\n  if (contra < 1) {\n    throw new Error(`Contra must be greater than 1, but ${contra} given.`);\n  }\n};\n\nexport interface CreateContractProps {\n  bidType: BID_TYPE;\n  partyScore?: PartyScoreValue | null;\n  taker: PLAYER_TYPE;\n  silent?: boolean;\n  bidVariant?: BidVariant | null;\n  winByTaker?: boolean | null;\n}\nexport const createContract = ({\n  bidType,\n  taker,\n  partyScore = null,\n  silent = false,\n  bidVariant = null,\n  winByTaker = null,\n}: CreateContractProps): Contract => {\n  const contract = {\n    bidType,\n    bidVariant,\n    contra: 1,\n    silent,\n    winByTaker,\n    taker,\n    bidBaseScore:\n      partyScore !== null\n        ? flow(getBid, getBidScore(partyScore))(bidType)\n        : null,\n  };\n  validateContract(contract);\n  return contract;\n};\n\nexport const updateBidBaseScore = (partyScore: number) => (\n  contract: Contract\n): Contract => ({\n  ...contract,\n  bidBaseScore: flow(getBid, getBidScore(partyScore))(contract.bidType),\n});\n\nexport type UpdateContractProps = Partial<\n  Pick<Contract, \"taker\" | \"winByTaker\" | \"silent\" | \"bidVariant\" | \"contra\">\n>;\nexport const updateContract = (updates: UpdateContractProps) => (\n  contract: Contract\n): Contract => {\n  const updated = { ...contract, ...updates };\n  validateContract(updated);\n  return updated;\n};\n\nexport type ContractScore = number | null;\nexport const calculateContract = (contract: Contract): ContractScore => {\n  const { winByTaker, bidBaseScore, contra, silent } = contract;\n  if (winByTaker === null || bidBaseScore === null) {\n    return null;\n  }\n  const multiplier = silent ? 0.5 : contra;\n  const sign = winByTaker ? 1 : -1;\n  return sign * bidBaseScore * multiplier;\n};\n\nexport type ContractWithIndex = [Contract, number];\nexport const withIndices = (contracts: Contract[]): ContractWithIndex[] =>\n  contracts.map((contract, index) => [contract, index]);\n\nconst PARTY_LIKE_BIDS = [BID_TYPE.PARTY, BID_TYPE.DOUBLE_PARTY, BID_TYPE.VOLAT];\nexport const filterByPartyLike = (\n  contracts: ContractWithIndex[]\n): ContractWithIndex[] =>\n  contracts.filter(([contract, _]) =>\n    PARTY_LIKE_BIDS.includes(contract.bidType)\n  );\n\nexport const filterByProps = (props: Partial<Contract>) => (\n  contracts: ContractWithIndex[]\n): ContractWithIndex[] => {\n  return contracts.filter(([contract, _]) =>\n    flow(pick(Object.keys(props)), isEqual(props))(contract)\n  );\n};\n\nexport const groupByPlayerType = (contracts: ContractWithIndex[]) => {\n  const groupped = groupBy(([contract]) => contract.taker)(contracts);\n  return {\n    [PLAYER_TYPE.DECLARER]: groupped[PLAYER_TYPE.DECLARER] || [],\n    [PLAYER_TYPE.OPPONENT]: groupped[PLAYER_TYPE.OPPONENT] || [],\n  };\n};\n","import React from \"react\";\nimport {\n  calculateContract,\n  Contract,\n  UpdateContractProps,\n} from \"../lib/contract\";\nimport { upperCaseToWords } from \"../lib/util\";\nimport {\n  TableContainer,\n  TableHead,\n  TableBody,\n  Table,\n  TableCell,\n  TableRow,\n  IconButton,\n  Button,\n  Checkbox,\n  Typography as T,\n} from \"@material-ui/core\";\nimport { MdDelete as RemoveIcon } from \"react-icons/md\";\nimport { BidVariant, getBid } from \"../lib/bid\";\nimport VariantSelector from \"./VariantSelector\";\nimport SilentSwitch from \"./SilentSwitch\";\nimport MultiplierSelector from \"./MultiplierSelector\";\nimport {\n  getAnotherPlayerType,\n  getPlayerTypeColor,\n  PLAYER_TYPE,\n} from \"../lib/player\";\nimport curry from \"lodash/fp/curry\";\n\ninterface VariantSelectorModalProps {\n  contract: Contract;\n  onChange: (variant: BidVariant) => void;\n}\nconst VariantSelectorModal = (props: VariantSelectorModalProps) => {\n  const { contract, onChange } = props;\n  const handleChange = (variant: BidVariant) => {\n    onChange(variant);\n  };\n  const bid = getBid(contract.bidType);\n\n  if (!bid.variants) {\n    return null;\n  }\n\n  return (\n    <>\n      <VariantSelector\n        variants={bid.variants || []}\n        selected={contract.bidVariant}\n        onChange={handleChange}\n        render={(handleOpen) => (\n          <Button\n            variant=\"outlined\"\n            color=\"default\"\n            onClick={handleOpen}\n            size=\"small\"\n          >\n            {upperCaseToWords(contract.bidVariant ?? \"Select variant\")}\n          </Button>\n        )}\n      />\n    </>\n  );\n};\n\nenum ACTION_TYPE {\n  DELETE = \"DELETE\",\n  CHANGE = \"CHANGE\",\n}\n\ntype ContractField = keyof UpdateContractProps;\ntype Field = ContractField | string;\ninterface ColumnDefinition {\n  field: Field;\n  headerName: string;\n  valueGetter?: (\n    contract: Contract,\n    onAction?: (actionType: ACTION_TYPE, value?: any) => void\n  ) => React.ReactNode;\n}\nconst columns: ColumnDefinition[] = [\n  {\n    field: \"bidType\",\n    headerName: \"Bid\",\n    valueGetter: (contract: Contract) => upperCaseToWords(contract.bidType),\n  },\n  {\n    field: \"bidVariant\",\n    headerName: \"Variant\",\n    valueGetter: (contract, onAction) => {\n      const handleChange = (variant: BidVariant) =>\n        onAction && onAction(ACTION_TYPE.CHANGE, variant);\n\n      return (\n        <VariantSelectorModal contract={contract} onChange={handleChange} />\n      );\n    },\n  },\n  {\n    field: \"taker\",\n    headerName: \"Taker\",\n    valueGetter: (contract, onAction) => {\n      const newTaker = getAnotherPlayerType(contract.taker);\n      const handleClick = () =>\n        onAction && onAction(ACTION_TYPE.CHANGE, newTaker);\n      const color = getPlayerTypeColor(contract.taker);\n      return (\n        <Button\n          color={color}\n          onClick={handleClick}\n          variant=\"outlined\"\n          size=\"small\"\n        >\n          {contract.taker}\n        </Button>\n      );\n    },\n  },\n  {\n    field: \"silent\",\n    headerName: \"Silent\",\n    valueGetter: (contract, onAction) => {\n      const handleChange = (silent: boolean) =>\n        onAction && onAction(ACTION_TYPE.CHANGE, silent);\n      return (\n        <SilentSwitch\n          bidType={contract.bidType}\n          onChange={handleChange}\n          value={contract.silent}\n        />\n      );\n    },\n  },\n  {\n    field: \"bidBaseScore\",\n    headerName: \"Base Score\",\n  },\n  {\n    headerName: \"Contra\",\n    field: \"contra\",\n    valueGetter: (contract, onAction) => {\n      const handleChange = (contra: number) =>\n        onAction && onAction(ACTION_TYPE.CHANGE, contra);\n\n      if (getBid(contract.bidType).denyContra) {\n        return null;\n      }\n      return (\n        <MultiplierSelector\n          onChange={handleChange}\n          value={contract.contra}\n          disabled={contract.silent}\n        />\n      );\n    },\n  },\n  {\n    field: \"winByTaker\",\n    headerName: \"Win by the Taker?\",\n    valueGetter: (contract, onAction) => {\n      const { winByTaker, taker } = contract;\n      const handleClick = () => {\n        const nextValue =\n          winByTaker === null ? true : winByTaker === true ? false : null;\n        onAction && onAction(ACTION_TYPE.CHANGE, nextValue);\n      };\n\n      const title =\n        winByTaker === true\n          ? \"Won by the Taker!\"\n          : winByTaker === false\n          ? \"Lose by the Taker!\"\n          : \"Still unknown / Not count in final score...\";\n\n      return (\n        <Checkbox\n          title={title}\n          checked={winByTaker === true}\n          indeterminate={winByTaker === null}\n          onClick={handleClick}\n          color={taker === PLAYER_TYPE.DECLARER ? \"primary\" : \"secondary\"}\n        />\n      );\n    },\n  },\n  {\n    field: \"takerScore\",\n    headerName: \"Taker score\",\n    valueGetter: (contract) => (\n      <T\n        variant=\"button\"\n        color={\n          contract.taker === PLAYER_TYPE.DECLARER ? \"primary\" : \"secondary\"\n        }\n      >\n        {calculateContract(contract)}\n      </T>\n    ),\n  },\n  {\n    field: \"actions\",\n    headerName: \" \",\n    valueGetter: (_, onAction) => {\n      const handleClick = () => onAction && onAction(ACTION_TYPE.DELETE, null);\n      return (\n        <IconButton title=\"Remove\" onClick={handleClick}>\n          <RemoveIcon />\n        </IconButton>\n      );\n    },\n  },\n];\n\nconst isContractField = (\n  field: Field,\n  contract: Contract\n): field is ContractField => {\n  return field in contract;\n};\n\ninterface ContractsTableProps {\n  contracts: Contract[];\n  onChange: (index: number, field: keyof Contract, value: any) => void;\n  onDelete: (index: number) => void;\n}\nconst ContractsTable = (props: ContractsTableProps) => {\n  const { contracts, onChange, onDelete } = props;\n\n  function handleAction(\n    index: number,\n    field: ContractField | null,\n    actionType: ACTION_TYPE,\n    value: any\n  ) {\n    if (actionType === ACTION_TYPE.DELETE) {\n      return onDelete(index);\n    }\n    if (actionType === ACTION_TYPE.CHANGE && field !== null) {\n      return onChange(index, field, value);\n    }\n    throw new Error(\n      `Invalid if ACTION_TYPE (${actionType}) is CHANGE the field can not be null.`\n    );\n  }\n\n  return (\n    <TableContainer>\n      <Table>\n        <TableHead>\n          <TableRow>\n            {columns.map((column, index) => (\n              <TableCell key={index}> {column.headerName} </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {contracts.map((contract, rowIndex) => (\n            <TableRow key={rowIndex}>\n              {columns.map((column, cellIndex) => (\n                <TableCell key={cellIndex}>\n                  {isContractField(column.field, contract)\n                    ? column.valueGetter\n                      ? column.valueGetter(\n                          contract,\n                          curry(handleAction)(rowIndex)(column.field)\n                        )\n                      : contract[column.field]\n                    : column.valueGetter\n                    ? column.valueGetter(\n                        contract,\n                        curry(handleAction)(rowIndex)(null)\n                      )\n                    : \" \"}\n                </TableCell>\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default ContractsTable;\n","import React, { ChangeEvent, useState, ReactNode } from \"react\";\nimport {\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport { BidVariant } from \"../lib/bid\";\nimport { upperCaseToWords } from \"../lib/util\";\n\ninterface VariantSelectorProps {\n  render: (handleOpen: () => void) => ReactNode;\n  variants: BidVariant[];\n  selected: BidVariant | null;\n  onChange: (variant: BidVariant) => void;\n  onClose?: () => void;\n}\nconst VariantSelector = (props: VariantSelectorProps) => {\n  const { variants, selected, onChange, render, onClose } = props;\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => setOpen(true);\n  const handleClose = () => {\n    setOpen(false);\n    onClose && onClose();\n  };\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange(event.target.value as BidVariant);\n    handleClose();\n  };\n\n  return (\n    <>\n      {render(handleOpen)}\n      <Dialog open={open} onClose={handleClose}>\n        <DialogContent>\n          <RadioGroup name=\"variants\" onChange={handleChange} value={selected}>\n            {variants.map((variant: BidVariant) => (\n              <FormControlLabel\n                control={<Radio color=\"default\" value={variant} />}\n                label={upperCaseToWords(variant)}\n              />\n            ))}\n          </RadioGroup>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} variant=\"outlined\">\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default VariantSelector;\n","import React from \"react\";\nimport { Switch, FormControlLabel, FormGroup } from \"@material-ui/core\";\nimport { BID_TYPE, canSilent, getBid } from \"../lib/bid\";\n\ninterface SilentSwitchProps {\n  bidType: BID_TYPE;\n  onChange: (value: boolean) => void;\n  value?: boolean;\n  label?: boolean;\n}\nconst SilentSwitch = ({\n  bidType,\n  onChange,\n  value,\n  label,\n}: SilentSwitchProps) => {\n  const bid = getBid(bidType);\n  if (!canSilent(bid)) {\n    return null;\n  }\n  return (\n    <FormGroup>\n      <FormControlLabel\n        control={\n          <Switch\n            onChange={(event) => onChange(event.target.checked)}\n            checked={value}\n            color=\"default\"\n          />\n        }\n        label={label ? \"Silent\" : \"\"}\n      />\n    </FormGroup>\n  );\n};\nexport default SilentSwitch;\n","import React from \"react\";\nimport { IconButton, Typography as T } from \"@material-ui/core\";\nimport {\n  MdArrowUpward as DoubleContraIcon,\n  MdArrowDownward as DivideContraIcon,\n} from \"react-icons/md\";\ninterface MultiplierSelectorProps {\n  value: number;\n  onChange: (value: number) => void;\n  disabled?: boolean;\n}\nconst MultiplierSelector = ({\n  value,\n  onChange,\n  disabled,\n}: MultiplierSelectorProps) => {\n  const handleChange = (value: number) => onChange && onChange(value);\n  const handleDivide = () => value > 1 && handleChange(value / 2);\n  const handleDouble = () => handleChange(value * 2);\n\n  return (\n    <>\n      <T\n        component={disabled ? \"s\" : \"span\"}\n        color={disabled ? \"textPrimary\" : \"textSecondary\"}\n      >\n        {value}\n      </T>\n      <IconButton title=\"Double\" onClick={handleDouble} disabled={disabled}>\n        <DoubleContraIcon />\n      </IconButton>\n      <IconButton\n        title=\"Divide by 2\"\n        onClick={handleDivide}\n        disabled={value === 1 || disabled}\n      >\n        <DivideContraIcon />\n      </IconButton>\n    </>\n  );\n};\n\nexport default MultiplierSelector;\n","import React, { ChangeEvent } from \"react\";\nimport {\n  CALLED_TAROCK,\n  Game,\n  UpdateGameProps,\n  PARTY_SCORE,\n  PARTY_SCORE_TYPE,\n} from \"../lib/game\";\nimport {\n  Grid,\n  FormControl,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Typography as T,\n} from \"@material-ui/core\";\nimport { upperCaseToWords } from \"../lib/util\";\nimport MultiplierSelector from \"./MultiplierSelector\";\n\nconst calledTarockOptions = [\"_None_\", ...Object.keys(CALLED_TAROCK)];\nconst partyScoreOptions = Object.keys(PARTY_SCORE);\n\ninterface GamePropertiesProps {\n  game: Game;\n  onChange: (property: keyof UpdateGameProps, value: any) => void;\n}\nconst GameProperties = (props: GamePropertiesProps) => {\n  const { game, onChange } = props;\n  return (\n    <Grid container spacing={3} alignContent=\"space-around\">\n      <Grid item>\n        <FormControl component=\"fieldset\">\n          <InputLabel id=\"called-tarock-selector\">Called</InputLabel>\n          <Select\n            value={game.called_tarock || \"_None_\"}\n            onChange={(event: ChangeEvent<{ value: string }>) => {\n              onChange(\"called_tarock\", event.target.value);\n            }}\n            labelId=\"called-tarock-selector\"\n          >\n            {calledTarockOptions.map((option) => (\n              <MenuItem key={option} value={option}>\n                {option === \"_None_\" ? \"None\" : option}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Grid>\n      <Grid item>\n        <FormControl component=\"fieldset\">\n          <FormLabel>Party Score</FormLabel>\n          <RadioGroup\n            row\n            value={game.partyScoreType}\n            onChange={(event: ChangeEvent<HTMLInputElement>) => {\n              onChange(\n                \"partyScoreType\",\n                event.target.value as PARTY_SCORE_TYPE\n              );\n            }}\n          >\n            {partyScoreOptions.map((option: PARTY_SCORE_TYPE) => (\n              <FormControlLabel\n                key={option}\n                value={option}\n                control={<Radio color=\"default\" />}\n                label={upperCaseToWords(option)}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      </Grid>\n      <Grid item>\n        <T variant=\"caption\" display=\"block\" color=\"textSecondary\">\n          Party Base Score\n        </T>\n        <MultiplierSelector\n          value={game.partyBaseScore}\n          onChange={(score) => {\n            onChange(\"partyBaseScore\", score);\n          }}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default GameProperties;\n","import {\n  Button,\n  TextField,\n  Grid,\n  Card,\n  CardHeader,\n  Avatar,\n  CardContent,\n  CardActions,\n  IconButton,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport {\n  createPlayer,\n  getPlayerTypeColor,\n  Player,\n  PlayerList,\n  rotatePlayerTypeWithNull,\n  updatePlayer,\n  updatePlayerAt,\n  removePlayer,\n} from \"../lib/player\";\nimport { MdDelete as RemoveIcon } from \"react-icons/md\";\nimport { MdEdit as EditIcon } from \"react-icons/md\";\nimport { MdPerson as UserIcon } from \"react-icons/md\";\nimport { MdPersonAdd as AddUserIcon } from \"react-icons/md\";\nimport { MdDone as FinishEditingIcon } from \"react-icons/md\";\n\ninterface PlayerAvatarProps {\n  player: Player;\n}\nconst PlayerAvatar = ({ player }: PlayerAvatarProps) => (\n  <Avatar>\n    {player.name.length > 0 ? <>{player.name.slice(0, 1)}</> : <UserIcon />}\n  </Avatar>\n);\n\ninterface EditablePlayerItemProps {\n  player: Player;\n  onRemove: (player: Player) => void;\n  onChange: (updated: Player) => void;\n}\nconst EditablePlayerItem = (props: EditablePlayerItemProps) => {\n  const { player, onRemove, onChange } = props;\n  const handleRemove = () => onRemove(player);\n  const handleChange = (prop: string) => (value: any) => {\n    onChange(updatePlayer({ [prop]: value })(player));\n  };\n  const handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    handleChange(\"name\")(event.target.value);\n  };\n  const handleBaseScoreChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const value = event.target.value;\n    handleChange(\"baseScore\")(value.length > 0 ? Number(value) : null);\n  };\n  return (\n    <Card>\n      <CardContent>\n        <Grid container direction=\"row\" spacing={2}>\n          <Grid item>\n            <PlayerAvatar player={player} />\n          </Grid>\n          <Grid container item direction=\"column\" xs spacing={2}>\n            <Grid item>\n              <TextField\n                id={`${player.id}_name`}\n                label=\"Name\"\n                value={player.name}\n                onChange={handleNameChange}\n              />\n            </Grid>\n            <Grid item>\n              <TextField\n                id={`${player.id}_baseScore`}\n                label=\"Base Score\"\n                type=\"number\"\n                value={player.baseScore}\n                onChange={handleBaseScoreChange}\n              />\n            </Grid>\n          </Grid>\n          <Grid item>\n            <IconButton onClick={handleRemove}>\n              <RemoveIcon />\n            </IconButton>\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\ninterface PlayerItemProps {\n  player: Player;\n  onChange: (updated: Player) => void;\n}\nconst PlayerItem = ({ player, onChange }: PlayerItemProps) => {\n  const handleChange = () => {\n    onChange(\n      updatePlayer({ type: rotatePlayerTypeWithNull(player.type) })(player)\n    );\n  };\n  const color = getPlayerTypeColor(player.type);\n  const playing = player.type !== null;\n  const hasCurrentScore = player.currentScore !== null;\n  const currentScoreText =\n    playing && hasCurrentScore ? ` (${player.currentScore})` : \"\";\n  const score =\n    player.score !== null ? player.score + player.baseScore : player.baseScore;\n  return (\n    <Card>\n      <CardHeader\n        avatar={<PlayerAvatar player={player} />}\n        title={player.name}\n        subheader={`${score}${currentScoreText}`}\n      />\n      <CardActions>\n        <Button variant=\"outlined\" color={color} onClick={handleChange}>\n          {player.type || \"Not playing\"}\n        </Button>\n      </CardActions>\n    </Card>\n  );\n};\n\ninterface PlayersProps {\n  players: Player[];\n  onPlayerListChange: (playerList: PlayerList) => void;\n  onSaveScores: () => void;\n  saveDisabled: boolean;\n  onResetPlayers: () => void;\n  onResetScores: () => void;\n}\nconst Players = (props: PlayersProps) => {\n  const {\n    players,\n    onPlayerListChange,\n    onSaveScores,\n    saveDisabled,\n    onResetPlayers,\n    onResetScores,\n  } = props;\n  const [edit, setEdit] = useState(false);\n\n  const handleToogleEdit = () => setEdit((prev) => !prev);\n  const handleAdd = () => {\n    onPlayerListChange([...players, createPlayer()]);\n  };\n  const handleRemove = (player: Player) => {\n    onPlayerListChange(removePlayer(player)(players));\n  };\n  const handleChange = (updated: Player) => {\n    onPlayerListChange(updatePlayerAt(updated)(players));\n  };\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item container direction=\"row\" alignItems=\"center\" spacing={1}>\n        <Grid item>\n          <IconButton onClick={handleAdd} title=\"Add new player\">\n            <AddUserIcon />\n          </IconButton>\n        </Grid>\n        <Grid item>\n          <IconButton\n            onClick={handleToogleEdit}\n            title={edit ? \"Finish editing\" : \"Edit user properties\"}\n          >\n            {edit ? <FinishEditingIcon /> : <EditIcon />}\n          </IconButton>\n        </Grid>\n        <Grid item>\n          <Button\n            variant=\"outlined\"\n            disabled={saveDisabled}\n            onClick={onSaveScores}\n          >\n            Save scores\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant=\"outlined\" onClick={onResetPlayers}>\n            Reset Players\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant=\"outlined\" onClick={onResetScores}>\n            Reset Scores\n          </Button>\n        </Grid>\n      </Grid>\n      {players.map((player) => (\n        <Grid item xs={edit ? 3 : false}>\n          {edit ? (\n            <EditablePlayerItem\n              key={player.id}\n              onChange={handleChange}\n              onRemove={handleRemove}\n              player={player}\n            />\n          ) : (\n            <PlayerItem\n              key={player.id}\n              player={player}\n              onChange={handleChange}\n            />\n          )}\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default Players;\n","import { Game } from \"./game\";\nimport {\n  PlayerList,\n  PlayerScore,\n  PLAYER_TYPE,\n  getPlayerNumberByType,\n  PlayerListObject,\n  Player,\n  updatePlayer,\n} from \"./player\";\nimport assignWith from \"lodash/fp/assignWith\";\nimport { isEqual } from \"lodash\";\n\nconst getScore = (players: PlayerList) => (\n  game: Game\n): [PlayerScore, PlayerScore] => {\n  const [numberOfDeclarers, numberOfOpponents] = getPlayerNumberByType(players);\n  const opponentsGameScore = game.scores[PLAYER_TYPE.OPPONENT];\n  const declarersGameScore = game.scores[PLAYER_TYPE.DECLARER];\n  if (opponentsGameScore === null || declarersGameScore === null) {\n    return [null, null];\n  }\n  if (numberOfOpponents === 2 && numberOfDeclarers === 2) {\n    return [declarersGameScore, opponentsGameScore];\n  }\n  if (numberOfOpponents === 3 && numberOfDeclarers === 1) {\n    return [declarersGameScore * 3, opponentsGameScore];\n  }\n  if (numberOfOpponents === 1 && numberOfDeclarers === 3) {\n    return [declarersGameScore, opponentsGameScore * 3];\n  }\n  return [null, null];\n};\n\nexport const getCurrentScoreForPlayers = (game: Game) => (\n  players: PlayerList\n): PlayerList => {\n  return players.map((player) => {\n    const [declarersScore, opponentsScore] = getScore(players)(game);\n    const score = {\n      [PLAYER_TYPE.OPPONENT]: opponentsScore,\n      [PLAYER_TYPE.DECLARER]: declarersScore,\n    };\n    return {\n      ...player,\n      currentScore: player.type === null ? null : score[player.type],\n    };\n  });\n};\n\nexport const isReadyForSave = (players: PlayerList) => (\n  game: Game\n): boolean => {\n  const numbers = getPlayerNumberByType(players);\n  const playerNumberValid =\n    isEqual(numbers, [1, 3]) ||\n    isEqual(numbers, [2, 2]) ||\n    isEqual(numbers, [3, 1]);\n  const gameScoreValid =\n    game.scores[PLAYER_TYPE.DECLARER] !== null &&\n    game.scores[PLAYER_TYPE.OPPONENT] !== null;\n  return playerNumberValid && gameScoreValid;\n};\n\nconst defined = (value: any): boolean =>\n  Boolean(value !== undefined && value !== null);\n\nconst scoreSumAssigner = (score: number | undefined, player: Player) => {\n  const left = defined(score) ? score : 0;\n  const right = defined(player.currentScore) ? player.currentScore : 0;\n  return (left as number) + (right as number);\n};\n\nexport type PlayerScores = { [key: string]: number };\n\nexport const sumPlayerScores = (\n  playerListObjects: PlayerListObject[]\n): PlayerScores => {\n  return playerListObjects.reduce(\n    (scores, playerListObject) =>\n      assignWith(scoreSumAssigner)(scores, playerListObject),\n    {} as PlayerScores\n  );\n};\n\nexport const assignScoresToPlayers = (players: PlayerList) => (\n  scores: PlayerScores\n): PlayerList =>\n  players.map((player) =>\n    scores[player.id] === undefined\n      ? player\n      : updatePlayer({ score: scores[player.id] })(player)\n  );\n","export class ApplicationError extends Error {\n  userMessage: string;\n  constructor(message?: string, userMessage?: string) {\n    super(message);\n    this.userMessage =\n      userMessage === undefined ? \"Ooops. Someting went wrong!\" : userMessage;\n  }\n}\n","import { ApplicationError } from \"../lib/error\";\n\nexport const PREFIX = \"tarockSheetState\";\n\nexport class NotSupportedStorageError extends ApplicationError {\n  constructor(message?: string) {\n    super(message, \"Saving is not supported!\");\n    this.name = \"NotSupportedStorageError\";\n  }\n}\n\nexport class WrongDataStorageError extends ApplicationError {\n  constructor(message?: string) {\n    super(\n      message,\n      \"Not able to save or load your changes! It is an application error!\"\n    );\n    this.name = \"WrongDataStorageError\";\n  }\n}\n\nexport class UnsuccessfulSavingStorageError extends ApplicationError {\n  constructor(message?: string) {\n    super(message, \"Not able to save your changes! Maybe the storage is full.\");\n    this.name = \"UnsuccessfulSavingStorageError\";\n  }\n}\n\ninterface Storage {\n  isSupported: () => {};\n  create: (key: string, data: object) => void;\n  update: (key: string, data: object) => void;\n  delete: (key: string) => void;\n  read: (key: string) => object | null;\n}\nexport const storage = (prefix: string = PREFIX): Storage => {\n  const isSupported = () => Boolean(window.localStorage);\n  const _checkSupport = () => {\n    if (!isSupported()) {\n      throw new NotSupportedStorageError();\n    }\n  };\n  const _instance = window.localStorage;\n  const _serialize = (data: object): string => {\n    try {\n      return JSON.stringify(data);\n    } catch (error) {\n      throw new WrongDataStorageError(error.message);\n    }\n  };\n  const _unserialize = (str: string): object => {\n    try {\n      return JSON.parse(str);\n    } catch (error) {\n      throw new WrongDataStorageError(error.message);\n    }\n  };\n  const getStorageKey = (key: string): string => `${prefix}_${key}`;\n\n  const create = (key: string, data: object) => {\n    _checkSupport();\n    try {\n      _instance.setItem(getStorageKey(key), _serialize(data));\n    } catch (error) {\n      if (error instanceof WrongDataStorageError) {\n        throw error;\n      }\n      throw new UnsuccessfulSavingStorageError(error.message);\n    }\n  };\n  const remove = (key: string) => {\n    _checkSupport();\n    _instance.removeItem(key);\n  };\n  const read = (key: string): object | null => {\n    _checkSupport();\n    const serialized = _instance.getItem(getStorageKey(key));\n    return serialized === null ? null : _unserialize(serialized);\n  };\n\n  return {\n    isSupported,\n    create,\n    update: create,\n    delete: remove,\n    read,\n  };\n};\n","import React, { useEffect, useState } from \"react\";\nimport { BID_TYPE, getAllBidsByGorup } from \"../lib/bid\";\nimport ContractSelector from \"./ContractSelector\";\nimport {\n  Game,\n  createGame,\n  addContract,\n  updateGame,\n  updateGameContract,\n  removeContract,\n  UpdateGameProps,\n  removeAllContract,\n  isPartyLike,\n  addContractFlipped,\n} from \"../lib/game\";\nimport { Contract, createContract, updateContract } from \"../lib/contract\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport ContractsTable from \"./ContractsTable\";\nimport GameProperties from \"./GameProperties\";\nimport flow from \"lodash/fp/flow\";\nimport concat from \"lodash/fp/concat\";\nimport Players from \"./Players\";\nimport {\n  clearPlayersType,\n  createPlayerListObject,\n  filterPlayersInGame,\n  Player,\n  PlayerList,\n  PlayerListObject,\n  PLAYER_TYPE,\n  resetPlayerScore,\n} from \"../lib/player\";\nimport {\n  assignScoresToPlayers,\n  getCurrentScoreForPlayers,\n  isReadyForSave,\n  sumPlayerScores,\n} from \"../lib/gameScoreList\";\nimport { storage as storageInitializer } from \"../services/localStorage\";\n// import ScoreSheet from \"./ScoreSheet\";\n\nconst allBidsByGroup = getAllBidsByGorup();\nconst storage = storageInitializer();\n\nconst TarockSheet = () => {\n  const [game, setGame] = useState<Game>(\n    (storage.read(\"game\") as Game | null) ?? createGame()\n  );\n  const [players, setPlayers] = useState<Player[]>(\n    (storage.read(\"players\") as Player[] | null) ?? []\n  );\n  const [gameScoreList, setGameScoreList] = useState<PlayerListObject[]>(\n    (storage.read(\"gameScoreList\") as PlayerListObject[] | null) ?? []\n  );\n\n  useEffect(() => {\n    setPlayers(getCurrentScoreForPlayers(game));\n  }, [game]);\n\n  useEffect(() => {\n    if (!storage.isSupported()) {\n      return;\n    }\n    try {\n      storage.update(\"game\", game as object);\n      storage.update(\"players\", players);\n      storage.update(\"gameScoreList\", gameScoreList);\n    } catch (error) {\n      console.error(error);\n    }\n  }, [game, players, gameScoreList]);\n\n  const handleContractDelete = (index: number) =>\n    setGame(removeContract(game)(index));\n  const handleResetGame = () => setGame(createGame());\n  const handlePlayerListChange = (playerList: PlayerList) => {\n    updatePlayersState(playerList);\n  };\n  const handleChangeGameProperties = (\n    prop: keyof UpdateGameProps,\n    value: any\n  ) => {\n    if (prop === \"partyScoreType\") {\n      const contract = isPartyLike(value)\n        ? createContract({\n            bidType: BID_TYPE.PARTY,\n            taker: PLAYER_TYPE.DECLARER,\n          })\n        : createContract({\n            bidType: BID_TYPE.KLOPICZKY,\n            taker: PLAYER_TYPE.DECLARER,\n            winByTaker: true,\n          });\n      const updated = flow(\n        removeAllContract,\n        addContractFlipped(contract),\n        updateGame({ [prop]: value })\n      )(game);\n      setGame(updated);\n    } else {\n      setGame(updateGame({ [prop]: value })(game));\n    }\n  };\n  const handleAddContract = (contract: Contract) => {\n    return setGame(flow(createContract, addContract(game))(contract));\n  };\n  const handleChangeContract = (\n    index: number,\n    field: keyof Contract,\n    value: any\n  ) => {\n    setGame(\n      flow(\n        updateContract({ [field]: value }),\n        updateGameContract(game)(index)\n      )(game.contracts[index])\n    );\n  };\n  const handleSaveScores = () => {\n    const updatedGameScoreList = flow(\n      filterPlayersInGame,\n      createPlayerListObject,\n      concat(gameScoreList)\n    )(players);\n    updateGameScoreListState(updatedGameScoreList);\n  };\n  const updatePlayersState = (updated: PlayerList) => {\n    flow(getCurrentScoreForPlayers(game), setPlayers)(updated);\n  };\n  const updateGameScoreListState = (updated: PlayerListObject[]) => {\n    flow(\n      sumPlayerScores,\n      assignScoresToPlayers(players),\n      clearPlayersType,\n      updatePlayersState\n    )(updated);\n    setGameScoreList(updated);\n    setGame(createGame());\n  };\n  const handleResetPlayers = () => {\n    setGame(createGame());\n    updateGameScoreListState([]);\n    updatePlayersState([]);\n  };\n  const handleResetScores = () => {\n    updateGameScoreListState([]);\n    flow(resetPlayerScore, clearPlayersType, updatePlayersState)(players);\n  };\n\n  return (\n    <Grid container spacing={3} direction=\"column\">\n      <Grid item>\n        <Players\n          players={players}\n          onPlayerListChange={handlePlayerListChange}\n          onSaveScores={handleSaveScores}\n          saveDisabled={!isReadyForSave(players)(game)}\n          onResetPlayers={handleResetPlayers}\n          onResetScores={handleResetScores}\n        />\n      </Grid>\n      <Grid item>\n        <Grid item container spacing={1} direction=\"row\">\n          <Grid item>\n            <GameProperties game={game} onChange={handleChangeGameProperties} />\n          </Grid>\n          <Grid item>\n            <Button variant=\"outlined\" onClick={handleResetGame}>\n              Reset Game\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item>\n        <ContractSelector\n          key={\n            game.partyScoreType === null ? 1 : 0\n          } /* Resets the internal state if the game is reseted */\n          bidsByGroup={allBidsByGroup}\n          onAddContract={handleAddContract}\n        />\n      </Grid>\n      <Grid item>\n        <ContractsTable\n          contracts={game?.contracts as Contract[]}\n          onChange={handleChangeContract}\n          onDelete={handleContractDelete}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default TarockSheet;\n","import React from \"react\";\nimport {\n  AppBar,\n  Container,\n  makeStyles,\n  Typography as T,\n} from \"@material-ui/core\";\nimport { CgCardHearts as Icon } from \"react-icons/cg\";\nimport TarockSheet from \"./components/TarockSheet\";\n\nconst useAppStyle = makeStyles((theme) => ({\n  container: {\n    padding: theme.spacing(4),\n  },\n}));\n\nfunction App() {\n  const classes = useAppStyle();\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <T variant=\"h2\">\n          <Icon color=\"red\" /> Tarock Sheet\n        </T>\n      </AppBar>\n      <Container className={classes.container}>\n        <TarockSheet />\n      </Container>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}