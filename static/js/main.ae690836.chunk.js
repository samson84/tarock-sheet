(this["webpackJsonptarock-sheet"]=this["webpackJsonptarock-sheet"]||[]).push([[0],{360:function(e,t,n){"use strict";n.r(t);var r,c,a=n(3),o=n(1),i=n.n(o),l=n(14),u=n.n(l),s=n(424),j=n(425),O=n(399),b=n(427),d=n(51),f=n(426),h=n(195),p=n(9),v=n(16),T=n(13),E=n(95),y=n.n(E),x=n(185),C=n.n(x);!function(e){e.PARTY="PARTY",e.TRULL="TRULL",e.FOUR_KING="FOUR_KING",e.CATCH_THE_MAYOR="CATCH_THE_MAYOR",e.CATCH_THE_PAGAT="CATCH_THE_PAGAT",e.ULTI="ULTI",e.UHU="UHU",e.DOUBLE_PARTY="DOUBLE_PARTY",e.VOLAT="VOLAT",e.PHEASANT="PHEASANT",e.PHEASANT_IN_2ND="PHEASANT_IN_2ND",e.EIGHT_TAROCK="EIGHT_TAROCK",e.NINE_TAROCK="NINE_TAROCK",e.FURRY="FURRY",e.CENTRUM="CENTRUM",e.SMALL_BIRD="SMALL_BIRD",e.LARGE_BIRD="LARGE_BIRD",e.CSUZIMA="CSUZIMA",e.KING_ULTI="KING_ULTI",e.KING_UHU="KING_UHU",e.KLOPICZKY="KLOPICZKY"}(c||(c={}));var m,g,S={PARTY_LIKE:{weight:10},ULTI_LIKE:{weight:20},CENTRUM_LIKE:{weight:30},CATCHES:{weight:40},OTHERS:{weight:50}};!function(e){e.PAGAT="PAGAT",e.EAGLE="EAGLE"}(m||(m={})),function(e){e.HEART="HEART",e.SPADE="SPADE",e.CLUB="CLUB",e.DIAMOND="DIAMOND"}(g||(g={}));var I,A=[m.PAGAT,m.EAGLE],R=[g.CLUB,g.DIAMOND,g.HEART,g.SPADE],L=(r={},Object(p.a)(r,c.PARTY,{score:function(e){return e},group:"PARTY_LIKE"}),Object(p.a)(r,c.TRULL,{score:2,silent:!0}),Object(p.a)(r,c.FOUR_KING,{score:2,silent:!0}),Object(p.a)(r,c.CATCH_THE_MAYOR,{score:42,silent:!0,group:"CATCHES"}),Object(p.a)(r,c.CATCH_THE_PAGAT,{score:4,group:"CATCHES"}),Object(p.a)(r,c.ULTI,{score:10,variants:[].concat(A),silent:!0,group:"ULTI_LIKE",notWinIfSilent:!0}),Object(p.a)(r,c.UHU,{score:15,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.DOUBLE_PARTY,{score:function(e){return 4*e},silent:!0,group:"PARTY_LIKE"}),Object(p.a)(r,c.VOLAT,{score:function(e){return 6*e},silent:!0,group:"PARTY_LIKE"}),Object(p.a)(r,c.PHEASANT,{score:20,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.PHEASANT_IN_2ND,{score:20,variants:[].concat(A),group:"ULTI_LIKE"}),Object(p.a)(r,c.EIGHT_TAROCK,{score:1,winByDefault:!0,denyContra:!0}),Object(p.a)(r,c.NINE_TAROCK,{score:2,winByDefault:!0,denyContra:!0}),Object(p.a)(r,c.FURRY,{score:25,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.CENTRUM,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.SMALL_BIRD,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.LARGE_BIRD,{score:10,group:"CENTRUM_LIKE"}),Object(p.a)(r,c.KING_ULTI,{score:15,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.KING_UHU,{score:20,variants:[].concat(R),group:"ULTI_LIKE"}),Object(p.a)(r,c.CSUZIMA,{score:4}),Object(p.a)(r,c.KLOPICZKY,{score:3,winByDefault:!0,denyContra:!0}),r),N=function(e){return Object(T.a)({type:e},L[e])},_=function(e){return!0===(null===e||void 0===e?void 0:e.silent)},P=function(e){return function(t){return"function"===typeof t.score?t.score(e):t.score}},k=n(401),w=n(402),K=n(403),D=n(186),U=n(431),G=function(e){if(e.length<1)return e;var t=e.split(""),n=Object(D.a)(t),r=n[0],c=n.slice(1);return"".concat(r.toUpperCase()).concat(c.join("").toLowerCase())},H=function(e){return e.split("_").map(G).join(" ")},B=n(34);!function(e){e.DECLARER="DECLARER",e.OPPONENT="OPPONENT"}(I||(I={}));var Y,M,V=function(e){return function(t){return Object(T.a)(Object(T.a)({},t),e)}},X=function(e){return e===I.DECLARER?I.OPPONENT:I.DECLARER},F=function(e){return new Map([[I.DECLARER,"primary"],[I.OPPONENT,"secondary"],[null,"default"]]).get(e)||"default"},Z=function(e){var t=e.reduce((function(e,t){var n=Object(v.a)(e,2),r=n[0],c=n[1];return t.type===I.OPPONENT?[r,c+1]:t.type===I.DECLARER?[r+1,c]:[r,c]}),[0,0]),n=Object(v.a)(t,2);return[n[0],n[1]]},W=function(e){return e.map((function(e){return V({type:null})(e)}))},z=function(e){return e.map((function(e){return V({score:null})(e)}))},J=function(e){return e.filter((function(e){return null!==e.type}))},q=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},Q=function(e){var t=e.bidsByGroup,n=e.onAddContract,r=Object(o.useState)(!1),c=Object(v.a)(r,2),i=c[0],l=c[1];return Object(a.jsxs)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:[C()((function(e){return S[e].weight}),Object.keys(S)).map((function(e){return Object(a.jsxs)(O.a,{item:!0,spacing:1,children:[Object(a.jsx)(d.a,{variant:"caption",display:"block",color:"textSecondary",children:H(e)}),t[e].map((function(e){return Object(a.jsx)(b.a,{component:"span",mr:.5,children:Object(a.jsx)(k.a,{variant:"outlined",color:"default",onClick:function(){return function(e){var t=N(e),r=i&&!t.notWinIfSilent;n({bidType:e,taker:I.DECLARER,silent:i&&_(t),bidVariant:null,winByTaker:t.winByDefault||r||null})}(e.type)},size:"small",disabled:i&&!_(e),children:H(e.type)})},e.type)}))]},e)})),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(w.a,{control:Object(a.jsx)(K.a,{checked:i,onChange:function(){l((function(e){return!e}))},name:"silentAndWinSwitch",color:"default"}),label:"Silent & Win"})})]})},$=n(26),ee=n.n($),te=(n(190),n(191),function(e){var t,n=e.silent,r=e.bidType,c=e.bidVariant,a=e.contra,o=N(r);if(n&&!_(o))throw new Error("".concat(o.type," can not be silent."));if(c&&!(t=c,function(e){return((null===e||void 0===e?void 0:e.variants)||[]).includes(t)})(o))throw new Error("".concat(o.type," does not have ").concat(c," variant."));if(!(Math.log2(a)%1===0))throw new Error("Contra must be power of two, but ".concat(a," given."));if(a<1)throw new Error("Contra must be greater than 1, but ".concat(a," given."))}),ne=function(e){var t=e.bidType,n=e.taker,r=e.partyScore,c=void 0===r?null:r,a=e.silent,o=void 0!==a&&a,i=e.bidVariant,l=void 0===i?null:i,u=e.winByTaker,s={bidType:t,bidVariant:l,contra:1,silent:o,winByTaker:void 0===u?null:u,taker:n,bidBaseScore:null!==c?ee()(N,P(c))(t):null};return te(s),s},re=function(e){var t=e.winByTaker,n=e.bidBaseScore,r=e.contra,c=e.silent;return null===t||null===n?null:(t?1:-1)*n*(c?.5:r)};c.PARTY,c.DOUBLE_PARTY,c.VOLAT;!function(e){e.KLOPICZKY="KLOPICZKY",e.TOOK_THREE="TOOK_THREE",e.TOOK_TWO="TOOK_TWO",e.TOOK_ONE="TOOK_ONE",e.SOLO="SOLO"}(M||(M={}));var ce,ae=function(e){return null!==e&&[M.TOOK_THREE,M.TOOK_TWO,M.TOOK_ONE,M.SOLO].includes(e)},oe=(Y={},Object(p.a)(Y,M.TOOK_THREE,1),Object(p.a)(Y,M.TOOK_TWO,2),Object(p.a)(Y,M.TOOK_ONE,3),Object(p.a)(Y,M.SOLO,4),Object(p.a)(Y,M.KLOPICZKY,0),Y),ie=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contracts:[],partyScoreType:t.partyScoreType||null,partyBaseScore:1,called_tarock:t.called_tarock||null,scores:(e={},Object(p.a)(e,I.DECLARER,null),Object(p.a)(e,I.OPPONENT,null),e)}},le=function(e){var t=Oe(e);return Object(T.a)(Object(T.a)({},e),{},{scores:Object(T.a)({},t)})},ue=function(e){return function(t){var n=void 0===e.partyScoreType?t.partyScoreType:e.partyScoreType,r=void 0===e.partyBaseScore?t.partyBaseScore:e.partyBaseScore,c=null===n?null:oe[n]*r,a=null===c?t.contracts:t.contracts.map(function(e){return function(t){return Object(T.a)(Object(T.a)({},t),{},{bidBaseScore:ee()(N,P(e))(t.bidType)})}}(c));return le(Object(T.a)(Object(T.a)({},t),{},{contracts:Object(B.a)(a)},e))}},se=function(e){return function(t){var n=(null===e||void 0===e?void 0:e.partyScoreType)?oe[null===e||void 0===e?void 0:e.partyScoreType]:null,r=ne(Object(T.a)(Object(T.a)({},t),{},{partyScore:n}));return le(Object(T.a)(Object(T.a)({},e),{},{contracts:[].concat(Object(B.a)(e.contracts),[r])}))}},je=function(e){return Object(T.a)(Object(T.a)({},e),{},{contracts:[]})},Oe=function(e){var t;return e.contracts.reduce((function(e,t){var n,r=re(t);if(null===r)return e;var c=function(e,t){return null===e?t:null===t?e:t+e},a=t.taker,o=X(a);return Object(T.a)(Object(T.a)({},e),{},(n={},Object(p.a)(n,a,c(e[a],r)),Object(p.a)(n,o,c(e[o],null===r?null:-1*r)),n))}),(t={},Object(p.a)(t,I.DECLARER,null),Object(p.a)(t,I.OPPONENT,null),t))},be=n(432),de=n(364),fe=n(407),he=n(408),pe=n(409),ve=n(410),Te=n(411),Ee=n(412),ye=n(20),xe=n(433),Ce=n(404),me=n(405),ge=n(430),Se=n(406),Ie=function(e){var t=e.variants,n=e.selected,r=e.onChange,c=e.render,i=e.onClose,l=Object(o.useState)(!1),u=Object(v.a)(l,2),s=u[0],j=u[1],O=function(){j(!1),i&&i()};return Object(a.jsxs)(a.Fragment,{children:[c((function(){return j(!0)})),Object(a.jsxs)(xe.a,{open:s,onClose:O,children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(me.a,{name:"variants",onChange:function(e){r(e.target.value),O()},value:n,children:t.map((function(e){return Object(a.jsx)(w.a,{control:Object(a.jsx)(ge.a,{color:"default",value:e}),label:H(e)})}))})}),Object(a.jsx)(Se.a,{children:Object(a.jsx)(k.a,{onClick:O,variant:"outlined",children:"Cancel"})})]})]})},Ae=n(365),Re=function(e){var t=e.bidType,n=e.onChange,r=e.value,c=e.label,o=N(t);return _(o)?Object(a.jsx)(Ae.a,{children:Object(a.jsx)(w.a,{control:Object(a.jsx)(K.a,{onChange:function(e){return n(e.target.checked)},checked:r,color:"default"}),label:c?"Silent":""})}):null},Le=function(e){var t=e.value,n=e.onChange,r=e.disabled,c=function(e){return n&&n(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{component:r?"s":"span",color:r?"textPrimary":"textSecondary",children:t}),Object(a.jsx)(de.a,{title:"Double",onClick:function(){return c(2*t)},disabled:r,children:Object(a.jsx)(ye.b,{})}),Object(a.jsx)(de.a,{title:"Divide by 2",onClick:function(){return t>1&&c(t/2)},disabled:1===t||r,children:Object(a.jsx)(ye.a,{})})]})},Ne=n(140),_e=n.n(Ne),Pe=function(e){var t=e.contract,n=e.onChange,r=N(t.bidType);return r.variants?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Ie,{variants:r.variants||[],selected:t.bidVariant,onChange:function(e){n(e)},render:function(e){var n;return Object(a.jsx)(k.a,{variant:"outlined",color:"default",onClick:e,size:"small",children:H(null!==(n=t.bidVariant)&&void 0!==n?n:"Select variant")})}})}):null};!function(e){e.DELETE="DELETE",e.CHANGE="CHANGE"}(ce||(ce={}));var ke=[{field:"bidType",headerName:"Bid",valueGetter:function(e){return H(e.bidType)}},{field:"bidVariant",headerName:"Variant",valueGetter:function(e,t){return Object(a.jsx)(Pe,{contract:e,onChange:function(e){return t&&t(ce.CHANGE,e)}})}},{field:"taker",headerName:"Taker",valueGetter:function(e,t){var n=X(e.taker),r=F(e.taker);return Object(a.jsx)(k.a,{color:r,onClick:function(){return t&&t(ce.CHANGE,n)},variant:"outlined",size:"small",children:e.taker})}},{field:"silent",headerName:"Silent",valueGetter:function(e,t){return Object(a.jsx)(Re,{bidType:e.bidType,onChange:function(e){return t&&t(ce.CHANGE,e)},value:e.silent})}},{field:"bidBaseScore",headerName:"Base Score"},{headerName:"Contra",field:"contra",valueGetter:function(e,t){return N(e.bidType).denyContra?null:Object(a.jsx)(Le,{onChange:function(e){return t&&t(ce.CHANGE,e)},value:e.contra,disabled:e.silent})}},{field:"winByTaker",headerName:"Win by the Taker?",valueGetter:function(e,t){var n=e.winByTaker,r=e.taker,c=!0===n?"Won by the Taker!":!1===n?"Lose by the Taker!":"Still unknown / Not count in final score...";return Object(a.jsx)(be.a,{title:c,checked:!0===n,indeterminate:null===n,onClick:function(){var e=null===n||!0!==n&&null;t&&t(ce.CHANGE,e)},color:r===I.DECLARER?"primary":"secondary"})}},{field:"takerScore",headerName:"Taker score",valueGetter:function(e){return Object(a.jsx)(d.a,{variant:"button",color:e.taker===I.DECLARER?"primary":"secondary",children:re(e)})}},{field:"actions",headerName:" ",valueGetter:function(e,t){return Object(a.jsx)(de.a,{title:"Remove",onClick:function(){return t&&t(ce.DELETE,null)},children:Object(a.jsx)(ye.c,{})})}}],we=function(e,t){return e in t},Ke=function(e){var t=e.contracts,n=e.onChange,r=e.onDelete;function c(e,t,c,a){if(c===ce.DELETE)return r(e);if(c===ce.CHANGE&&null!==t)return n(e,t,a);throw new Error("Invalid if ACTION_TYPE (".concat(c,") is CHANGE the field can not be null."))}return Object(a.jsx)(fe.a,{children:Object(a.jsxs)(he.a,{children:[Object(a.jsx)(pe.a,{children:Object(a.jsx)(ve.a,{children:ke.map((function(e,t){return Object(a.jsxs)(Te.a,{children:[" ",e.headerName," "]},t)}))})}),Object(a.jsx)(Ee.a,{children:t.map((function(e,t){return Object(a.jsx)(ve.a,{children:ke.map((function(n,r){return Object(a.jsx)(Te.a,{children:we(n.field,e)?n.valueGetter?n.valueGetter(e,_e()(c)(t)(n.field)):e[n.field]:n.valueGetter?n.valueGetter(e,_e()(c)(t)(null)):" "},r)}))},t)}))})]})})},De=n(413),Ue=n(414),Ge=n(428),He=n(435),Be=n(366),Ye=["_None_"].concat(Object(B.a)(Object.keys({XX:"XX",XIX:"XIX",XVIII:"XVIII",XVII:"XVII",XVI:"XVI",XV:"XV",XIV:"XIV",XIII:"XIII",XII:"XII"}))),Me=Object.keys(oe),Ve=function(e){var t=e.game,n=e.onChange;return Object(a.jsxs)(O.a,{container:!0,spacing:3,alignContent:"space-around",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(De.a,{component:"fieldset",children:[Object(a.jsx)(Ue.a,{id:"called-tarock-selector",children:"Called"}),Object(a.jsx)(Ge.a,{value:t.called_tarock||"_None_",onChange:function(e){n("called_tarock",e.target.value)},labelId:"called-tarock-selector",children:Ye.map((function(e){return Object(a.jsx)(He.a,{value:e,children:"_None_"===e?"None":e},e)}))})]})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(De.a,{component:"fieldset",children:[Object(a.jsx)(Be.a,{children:"Party Score"}),Object(a.jsx)(me.a,{row:!0,value:t.partyScoreType,onChange:function(e){n("partyScoreType",e.target.value)},children:Me.map((function(e){return Object(a.jsx)(w.a,{value:e,control:Object(a.jsx)(ge.a,{color:"default"}),label:H(e)},e)}))})]})}),Object(a.jsxs)(O.a,{item:!0,children:[Object(a.jsx)(d.a,{variant:"caption",display:"block",color:"textSecondary",children:"Party Base Score"}),Object(a.jsx)(Le,{value:t.partyBaseScore,onChange:function(e){n("partyBaseScore",e)}})]})]})},Xe=n(192),Fe=n.n(Xe),Ze=n(436),We=n(420),ze=n(421),Je=n(437),qe=n(422),Qe=n(423),$e=n(193),et=n.n($e),tt=n(419),nt=n(417),rt=n(39),ct=n(418),at=function(e){var t=e.text,n=void 0===t?"":t,r=e.title,c=void 0===r?"":r,i=e.target,l=e.onConfirm,u=Object(o.useState)(!1),s=Object(v.a)(u,2),j=s[0],O=s[1],b=Object(rt.a)(),d=Object(nt.a)(b.breakpoints.down("sm")),f=function(){O(!1)};return Object(a.jsxs)(a.Fragment,{children:[i((function(){O(!0)})),Object(a.jsxs)(xe.a,{fullScreen:d,open:j,onClose:f,children:[Object(a.jsx)(ct.a,{children:c}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(tt.a,{children:n})}),Object(a.jsxs)(Se.a,{children:[Object(a.jsx)(k.a,{onClick:function(){l(),f()},color:"default",variant:"outlined",children:"Ok, do it!"}),Object(a.jsx)(k.a,{onClick:f,color:"default",variant:"outlined",autoFocus:!0,children:"No, cancel it!"})]})]})]})},ot=function(e){var t=e.player;return Object(a.jsx)(Ze.a,{children:t.name.length>0?Object(a.jsx)(a.Fragment,{children:t.name.slice(0,2)}):Object(a.jsx)(ye.f,{})})},it=function(e){var t=e.player,n=e.onRemove,r=e.onChange,c=function(e){return function(n){r(V(Object(p.a)({},e,n))(t))}};return Object(a.jsx)(We.a,{children:Object(a.jsx)(ze.a,{children:Object(a.jsxs)(O.a,{container:!0,direction:"row",spacing:2,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ot,{player:t})}),Object(a.jsxs)(O.a,{container:!0,item:!0,direction:"column",xs:!0,spacing:2,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(Je.a,{id:"".concat(t.id,"_name"),label:"Name",value:t.name,onChange:function(e){c("name")(e.target.value)}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(Je.a,{id:"".concat(t.id,"_baseScore"),label:"Base Score",type:"number",value:t.baseScore,onChange:function(e){var t=e.target.value;c("baseScore")(t.length>0?Number(t):null)}})})]}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(at,{title:"Do you want to remove ".concat(t.name||"this player","?"),text:"It will remove the player, and deletes its score too.",target:function(e){return Object(a.jsx)(de.a,{onClick:e,children:Object(a.jsx)(ye.c,{})})},onConfirm:function(){return n(t)}})})]})})})},lt=function(e){var t=e.player,n=e.onChange,r=F(t.type),c=null!==t.type,o=null!==t.currentScore,i=c&&o?" (".concat(t.currentScore,")"):"",l=null!==t.score?t.score+t.baseScore:t.baseScore,u=l>180;return Object(a.jsxs)(We.a,{children:[Object(a.jsx)(qe.a,{avatar:Object(a.jsx)(ot,{player:t}),title:t.name,subheader:Object(a.jsxs)("span",{children:[u&&Object(a.jsx)(et.a,{fontSize:"small",color:"action"}),"".concat(l).concat(i)]})}),Object(a.jsx)(Qe.a,{children:Object(a.jsx)(k.a,{variant:"outlined",color:r,onClick:function(){var e;n(V({type:(e=t.type,new Map([[I.DECLARER,I.OPPONENT],[I.OPPONENT,null],[null,I.DECLARER]]).get(e)||null)})(t))},children:t.type||"Not playing"})})]})},ut=function(e){var t=e.players,n=e.onPlayerListChange,r=e.onSaveScores,c=e.saveDisabled,i=e.onResetPlayers,l=e.onResetScores,u=Object(o.useState)(!1),s=Object(v.a)(u,2),j=s[0],b=s[1],d=function(e){n(function(e){return function(t){return t.filter((function(t){return t.id!==e.id}))}}(e)(t))},f=function(e){n(function(e){return function(t){return t.map((function(t){return t.id===e.id?e:t}))}}(e)(t))};return Object(a.jsxs)(O.a,{container:!0,spacing:1,children:[Object(a.jsxs)(O.a,{item:!0,container:!0,direction:"row",alignItems:"center",spacing:1,children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(de.a,{onClick:function(){n([].concat(Object(B.a)(t),[{id:Object(U.a)(),name:"",baseScore:100,score:null,currentScore:null,type:null}]))},title:"Add new player",children:Object(a.jsx)(ye.g,{})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(de.a,{onClick:function(){return b((function(e){return!e}))},title:j?"Finish editing":"Edit user properties",children:j?Object(a.jsx)(ye.d,{}):Object(a.jsx)(ye.e,{})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(k.a,{variant:"outlined",disabled:c,onClick:r,children:"Save scores"})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(at,{title:"Do you want to reset the Players?",text:"It will remove all players, and also delete their scores.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Players"})},onConfirm:i})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(at,{title:"Do you want to reset the Scores?",text:"It will reset the scores to the players' base score, but keeps all the players.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Scores"})},onConfirm:l})})]}),t.map((function(e){return Object(a.jsx)(O.a,{item:!0,xs:!!j&&3,children:j?Object(a.jsx)(it,{onChange:f,onRemove:d,player:e},e.id):Object(a.jsx)(lt,{player:e,onChange:f},e.id)})}))]})},st=n(194),jt=n.n(st),Ot=n(105),bt=function(e){return function(t){return t.map((function(n){var r,c=function(e){return function(t){var n=Z(e),r=Object(v.a)(n,2),c=r[0],a=r[1],o=t.scores[I.OPPONENT],i=t.scores[I.DECLARER];return null===o||null===i?[null,null]:2===a&&2===c?[i,o]:3===a&&1===c?[3*i,o]:1===a&&3===c?[i,3*o]:[null,null]}}(t)(e),a=Object(v.a)(c,2),o=a[0],i=a[1],l=(r={},Object(p.a)(r,I.OPPONENT,i),Object(p.a)(r,I.DECLARER,o),r);return Object(T.a)(Object(T.a)({},n),{},{currentScore:null===n.type?null:l[n.type]})}))}},dt=function(e){return function(t){var n=Z(e),r=Object(Ot.isEqual)(n,[1,3])||Object(Ot.isEqual)(n,[2,2])||Object(Ot.isEqual)(n,[3,1]),c=null!==t.scores[I.DECLARER]&&null!==t.scores[I.OPPONENT];return r&&c}},ft=function(e){return Boolean(void 0!==e&&null!==e)},ht=function(e,t){return(ft(e)?e:0)+(ft(t.currentScore)?t.currentScore:0)},pt=function(e){return e.reduce((function(e,t){return jt()(ht)(e,t)}),{})},vt=n(65),Tt=n(66),Et=n(67),yt=n(196),xt=function(e){Object(Tt.a)(n,e);var t=Object(Et.a)(n);function n(e,r){var c;return Object(vt.a)(this,n),(c=t.call(this,e)).userMessage=void 0,c.userMessage=void 0===r?"Ooops. Someting went wrong!":r,c}return n}(Object(yt.a)(Error)),Ct="tarockSheetState",mt=function(e){Object(Tt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(vt.a)(this,n),(r=t.call(this,e,"Saving is not supported!")).name="NotSupportedStorageError",r}return n}(xt),gt=function(e){Object(Tt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(vt.a)(this,n),(r=t.call(this,e,"Not able to save or load your changes! It is an application error!")).name="WrongDataStorageError",r}return n}(xt),St=function(e){Object(Tt.a)(n,e);var t=Object(Et.a)(n);function n(e){var r;return Object(vt.a)(this,n),(r=t.call(this,e,"Not able to save your changes! Maybe the storage is full.")).name="UnsuccessfulSavingStorageError",r}return n}(xt),It=function(){var e=Object.keys(c).map((function(e){return N(e)}));return y()((function(e){return e.group||"OTHERS"}),e)}(),At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=function(){return Boolean(window.localStorage)},n=function(){if(!t())throw new mt},r=window.localStorage,c=function(e){try{return JSON.stringify(e)}catch(t){throw new gt(t.message)}},a=function(e){try{return JSON.parse(e)}catch(t){throw new gt(t.message)}},o=function(t){return"".concat(e,"_").concat(t)},i=function(e,t){n();try{r.setItem(o(e),c(t))}catch(a){if(a instanceof gt)throw a;throw new St(a.message)}},l=function(e){n(),r.removeItem(e)},u=function(e){n();var t=r.getItem(o(e));return null===t?null:a(t)};return{isSupported:t,create:i,update:i,delete:l,read:u}}(),Rt=function(){var e,t,n,r=Object(o.useState)(null!==(e=At.read("game"))&&void 0!==e?e:ie()),i=Object(v.a)(r,2),l=i[0],u=i[1],s=Object(o.useState)(null!==(t=At.read("players"))&&void 0!==t?t:[]),j=Object(v.a)(s,2),b=j[0],d=j[1],f=Object(o.useState)(null!==(n=At.read("gameScoreList"))&&void 0!==n?n:[]),h=Object(v.a)(f,2),E=h[0],y=h[1];Object(o.useEffect)((function(){d(bt(l))}),[l]),Object(o.useEffect)((function(){if(At.isSupported())try{At.update("game",l),At.update("players",b),At.update("gameScoreList",E)}catch(e){console.error(e)}}),[l,b,E]);var x=function(e){ee()(bt(l),d)(e)},C=function(e){ee()(pt,function(e){return function(t){return e.map((function(e){return void 0===t[e.id]?e:V({score:t[e.id]})(e)}))}}(b),W,x)(e),y(e),u(ie())},m=null!==l.partyScoreType;return Object(a.jsxs)(O.a,{container:!0,spacing:3,direction:"column",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(ut,{players:b,onPlayerListChange:function(e){x(e)},onSaveScores:function(){var e=ee()(J,q,Fe()(E))(b);C(e)},saveDisabled:!dt(b)(l),onResetPlayers:function(){u(ie()),C([]),x([])},onResetScores:function(){C([]),ee()(z,W,x)(b)}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsxs)(O.a,{item:!0,container:!0,spacing:1,direction:"row",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(Ve,{game:l,onChange:function(e,t){u((function(n){var r="partyScoreType"===e,a=n.partyScoreType===M.KLOPICZKY&&ae(t),o=ae(n.partyScoreType)&&t===M.KLOPICZKY,i=null===n.partyScoreType&&t===M.KLOPICZKY,u=ae(t)&&0===n.contracts.length;if(r&&(a||o||i||u)){var s=ae(t)?ne({bidType:c.PARTY,taker:I.DECLARER}):ne({bidType:c.KLOPICZKY,taker:I.DECLARER,winByTaker:!0});return ee()(je,function(e){return function(t){return se(t)(e)}}(s),ue(Object(p.a)({},e,t)))(l)}return ue(Object(p.a)({},e,t))(l)}))}})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(at,{title:"Do you really want to reset this Game?",text:"It will clear up the game's properties and remove all contracts without saving them, but keep the players' scores.",target:function(e){return Object(a.jsx)(k.a,{variant:"outlined",onClick:e,children:"Reset Game"})},onConfirm:function(){return u(ie())}})})]})}),Object(a.jsx)(O.a,{item:!0,children:m&&Object(a.jsx)(Q,{bidsByGroup:It,onAddContract:function(e){return u(ee()(ne,se(l))(e))}},null===l.partyScoreType?1:0)}),Object(a.jsx)(O.a,{item:!0,children:m&&Object(a.jsx)(Ke,{contracts:null===l||void 0===l?void 0:l.contracts,onChange:function(e,t,n){var r;u(ee()((r=Object(p.a)({},t,n),function(e){var t=Object(T.a)(Object(T.a)({},e),r);return te(t),t}),function(e){return function(t){return function(n){return le(Object(T.a)(Object(T.a)({},e),{},{contracts:e.contracts.map((function(e,r){return r===t?Object(T.a)({},n):e}))}))}}}(l)(e))(l.contracts[e]))},onDelete:function(e){return u(function(e){return function(t){return le(Object(T.a)(Object(T.a)({},e),{},{contracts:e.contracts.filter((function(e,n){return n!==t}))}))}}(l)(e))}})})]})},Lt=Object(s.a)((function(e){return{container:{padding:e.spacing(4)}}}));var Nt=function(){var e=Lt();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{position:"static",children:Object(a.jsxs)(O.a,{container:!0,spacing:2,alignItems:"center",children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(b.a,{mt:1,ml:1,fontSize:"h3.fontSize",children:Object(a.jsx)(h.a,{color:"white"})})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(d.a,{variant:"h3",children:"Tarock Sheet"})})]})}),Object(a.jsx)(f.a,{className:e.container,children:Object(a.jsx)(Rt,{})})]})},_t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,440)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Nt,{})}),document.getElementById("root")),_t()}},[[360,1,2]]]);
//# sourceMappingURL=main.ae690836.chunk.js.map